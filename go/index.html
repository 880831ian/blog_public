<!DOCTYPE html>
<html lang="zh-tw">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Go 介紹 - PinYi</title><meta name="description" content="這裡是關於一個菜鳥工程師斜槓Youtuber的小天地"><meta property="og:title" content="Go 介紹" />
<meta property="og:description" content="什麼是 Go ? Go 全名是 go programming language 又被稱為 Golang，是因為 go 這個詞太廣泛，不易搜尋，所以也可以叫 Golang。 Go 是由 Google 開發並維護的編譯程式語言，支" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://pin-yi.me/go/" /><meta property="og:image" content="https://pin-yi.me/go/featured-image.webp"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-21T11:33:25+08:00" />
<meta property="article:modified_time" content="2022-03-29T12:27:02+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://pin-yi.me/go/featured-image.webp"/>
<meta name="twitter:title" content="Go 介紹"/>
<meta name="twitter:description" content="什麼是 Go ? Go 全名是 go programming language 又被稱為 Golang，是因為 go 這個詞太廣泛，不易搜尋，所以也可以叫 Golang。 Go 是由 Google 開發並維護的編譯程式語言，支"/>
<meta name="application-name" content="PinYi 小天地">
<meta name="apple-mobile-web-app-title" content="PinYi 小天地"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/images/avatar.webp"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://pin-yi.me/go/" /><link rel="prev" href="https://pin-yi.me/docker/" /><link rel="next" href="https://pin-yi.me/go-restful-api-repository-messageboard/" /><link rel="stylesheet" href="/css/page.min.css"><link rel="stylesheet" href="/css/home.min.css">
        <link href="https://www.googletagmanager.com" rel="preconnect" crossorigin>
        <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Go 介紹",
        "inLanguage": "zh-tw",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/pin-yi.me\/go\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/pin-yi.me\/go\/featured-image.webp",
                            "width":  790 ,
                            "height":  260 
                        }],"genre": "posts","keywords": "Go, 實作, 介紹","wordcount":  9875 ,
        "url": "https:\/\/pin-yi.me\/go\/","datePublished": "2022-03-21T11:33:25+08:00","dateModified": "2022-03-29T12:27:02+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Zhuang,Pin-Yi","logo": "https:\/\/pin-yi.me\/images\/avatar.webp"},"author": {
                "@type": "Person",
                "name": "PinYi"
            },"description": ""
    }
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EK8X0P9SDS"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-EK8X0P9SDS', { 'anonymize_ip': false });
}
</script>
</head><body data-header-desktop="fixed" data-header-mobile="fixed"><script>(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="PinYi">PinYi 小天地</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/categories/"> 分類 </a><a class="menu-item" href="/tags/"> 標籤 </a><a class="menu-item" href="/sideproject/"> 作品集 </a><a class="menu-item" href="/categories/youtube/"> YouTube 影片 </a><a class="menu-item" href="/about/"> 關於我 </a><span class="menu-item delimiter"></span><span class="menu-item language" title="選擇語言">繁體中文<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/go/" selected>繁體中文</option></select>
                    </span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="請輸入要搜尋的標題或是內容" id="search-input-desktop">
                        <a href="#" class="search-button search-toggle" id="search-toggle-desktop" title="搜尋">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a class="menu-item" href="/index.xml" title="RSS"><i class="fas fa-rss fa-fw" title="RSS"></i> </a><a href="javascript:void(0);" class="menu-item theme-switch" title="切換主題">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="PinYi">PinYi 小天地</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="請輸入要搜尋的標題或是內容" id="search-input-mobile">
                        <a href="#" class="search-button search-toggle" id="search-toggle-mobile" title="搜尋">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="#" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/categories/" title="">分類</a><a class="menu-item" href="/tags/" title="">標籤</a><a class="menu-item" href="/sideproject/" title="">作品集</a><a class="menu-item" href="/categories/youtube/" title="">YouTube 影片</a><a class="menu-item" href="/about/" title="">關於我</a><div class="menu-item"><a href="/index.xml" title="RSS"><i class="fas fa-rss fa-fw" title="RSS"></i> </a>
                <span>&nbsp;|&nbsp;</span><a href="javascript:void(0);" class="theme-switch" title="切換主題">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div><span class="menu-item language" title="選擇語言">繁體中文<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/go/" selected>繁體中文</option></select>
                </span></div>
    </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目錄</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single" data-toc="enable"><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/go/featured-image.webp"
        data-srcset="/go/featured-image.webp, /go/featured-image.webp 1.5x, /go/featured-image.webp 2x"
        data-sizes="auto"
        alt="/go/featured-image.webp"
        title="/go/featured-image.webp" /></div><div class="single-card" data-image="true"><h2 class="single-title animated flipInX">Go 介紹</h2><div class="post-meta">
                <div class="post-meta-line"><span class="post-author"><a href="https://pin-yi.me" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>PinYi</a></span>&nbsp;<span class="post-category">出版於  <a href="/categories/codenotes/"><i class="far fa-folder fa-fw"></i>程式筆記</a></span></div>
                <div class="post-meta-line"><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-03-21">2022-03-21</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;約 9875 字</span>&nbsp;
                    <span><i class="far fa-clock fa-fw"></i>&nbsp;預計閱讀 20 分鐘</span>&nbsp;</div>
            </div>
            
            <hr><div class="details toc" id="toc-static"  data-kept="">
                    <div class="details-summary toc-title">
                        <span>目錄</span>
                        <span><i class="details-icon fas fa-angle-right"></i></span>
                    </div>
                    <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#什麼是-go-">什麼是 Go ?</a></li>
    <li><a href="#安裝-go">安裝 Go</a></li>
    <li><a href="#第一隻-go-程式">第一隻 Go 程式</a>
      <ul>
        <li><a href="#常見指令">常見指令</a></li>
        <li><a href="#套件相依性管理">套件相依性管理</a></li>
      </ul>
    </li>
    <li><a href="#變數">變數</a>
      <ul>
        <li><a href="#使用--來宣告">使用 <code>:=</code> 來宣告</a></li>
        <li><a href="#先宣告資料型態">先宣告資料型態</a></li>
        <li><a href="#直接宣告並賦值">直接宣告並賦值</a></li>
        <li><a href="#常見宣告錯誤">常見宣告錯誤</a>
          <ul>
            <li><a href="#重複宣告變數">重複宣告變數</a></li>
            <li><a href="#在-main-函式外賦值">在 main 函式外賦值</a></li>
            <li><a href="#沒有宣告就使用變數">沒有宣告就使用變數</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#go-資料型態">Go 資料型態</a>
      <ul>
        <li><a href="#字串-string">字串 String</a></li>
        <li><a href="#字符-character">字符 Character</a></li>
        <li><a href="#整數-integer">整數 Integer</a></li>
        <li><a href="#浮點數-float">浮點數 Float</a></li>
        <li><a href="#布林值-bool">布林值 Bool</a></li>
        <li><a href="#映射-map">映射 Map</a></li>
        <li><a href="#數字型別的運算">數字型別的運算</a></li>
        <li><a href="#型別轉換">型別轉換</a></li>
      </ul>
    </li>
    <li><a href="#go-資料結構">Go 資料結構</a>
      <ul>
        <li><a href="#指標-pointer">指標 Pointer</a></li>
        <li><a href="#陣列-array">陣列 Array</a></li>
        <li><a href="#切片-slice">切片 Slice</a></li>
        <li><a href="#結構-struct">結構 Struct</a></li>
      </ul>
    </li>
    <li><a href="#go-控制流程">Go 控制流程</a>
      <ul>
        <li><a href="#if">if</a></li>
        <li><a href="#switch">switch</a></li>
      </ul>
    </li>
    <li><a href="#go-迴圈">Go 迴圈</a></li>
    <li><a href="#go-方法-method">Go 方法 Method</a></li>
    <li><a href="#go-介面-interface">Go 介面 Interface</a></li>
    <li><a href="#goroutine">Goroutine</a>
      <ul>
        <li><a href="#單執行緒">單執行緒</a></li>
        <li><a href="#多執行緒">多執行緒</a></li>
        <li><a href="#等待">等待</a>
          <ul>
            <li><a href="#timesleep">time.sleep</a></li>
            <li><a href="#syncwaitgroup">sync.WaitGroup</a></li>
            <li><a href="#channel-阻塞">Channel 阻塞</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#channel">Channel</a></li>
    <li><a href="#參考資料">參考資料</a></li>
  </ul>
</nav></div>
                </div><div class="content" id="content"><h2 id="什麼是-go-">什麼是 Go ?</h2>
<p>Go 全名是 go programming language 又被稱為 Golang，是因為 go 這個詞太廣泛，不易搜尋，所以也可以叫 Golang。</p>
<p>Go 是由 Google 開發並維護的編譯程式語言，支援垃圾回收與併發，由於開發人之一也是 C 語言的作者，所以 Go 也繼承了許多 C 的風格
其特點有以下幾點：</p>
<ul>
<li>靜態型別：因爲靜態型別的特性，可以在編譯期間就進行完整的型別檢查，可以找出大部分的型別錯誤。</li>
<li>編譯速度：因為 Go 語言先天優勢是架構設計非常單純，並不像物件導向語言龐大，在編譯時不用相依其他的 library，因此讓他有更好的執行效率。</li>
<li>語法簡潔：Go 關鍵字不多，不到30幾個，因為其關鍵字不少也與 C 的關鍵字重複，學習更容易上手。</li>
<li>垃圾回收：Go 有自動內存回收機制，不需要由開發人員來管理。垃圾回收是一種記憶體管理機制。當程式所佔用記憶體不再被該程式給存取時，會借助垃圾回收演算法，將記憶體空間歸還給作業系統。</li>
<li>原生支援併發：Go 語言支持併發，只需要透過 <code>go</code> 關鍵字來開啟 <code>goroutine</code> 將可。<code>goroutine</code> 是 Go 語言實現併發的一種方式，在執行的過程需要少量的記憶體，來暫存自己的上下文，就可在不同的時間點來分段執行程式。並且有 <code>channel</code> 可以跟 <code>goroutine</code> 進行資料溝通。
<br></li>
</ul>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>靜態型別/動態型別<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>靜態型別的意思是指當宣告一個變數時，你必須同時宣告此變數所存放的資料型態為何</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">var age int // int
var name string // string
</code></pre></td></tr></table>
</div>
</div><br>
<p>動態型別指的是程式執行時，系統才可以看見的型別，什麼型別都可以</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">var i interface {}
i = 18
i = &#34;Golang 程式設計&#34;
</code></pre></td></tr></table>
</div>
</div></div>
        </div>
    </div>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>編譯式語言/直譯式語言<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><ul>
<li>編譯式：當我們寫完程式時，我們需要將程式 compile (編譯) 成電腦看得懂的程式，再將程式拿去執行。</li>
<li>直譯式：當我們寫完程式時，直接使用直譯器一行一行翻譯成電腦語言並執行。</li>
</ul>
<p>比較：</p>
<ol>
<li>編譯式執行效率較佳</li>
<li>直譯式相對容易 Debug</li>
<li>編譯式語言編譯完後，可以直接在各類 OS 系統中執行，因為編譯完的程式，就是電腦看得懂的。</li>
</ol>
</div>
        </div>
    </div>
<p>那我們大致了解 Go 後就來安裝 Go吧！</p>
<h2 id="安裝-go">安裝 Go</h2>
<p>本次作業系統為 macOS，所以後續都以 macOS 為主，如果是使用其他的作業系統，可以直接到<a href="https://go.dev/doc/install" target="_blank" rel="noopener noreffer">官網來下載</a>。</p>
<p>macOS 可以用 brew 等工具來下載，但這次我使用官網直接下載 pkg 來安裝。</p>
<figure><a class="lightgallery" href="/images/go/download.png" title="/images/go/download.png" data-thumbnail="/images/go/download.png" data-sub-html="<h2>Go 官網下載位置</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/go/download.png"
            data-srcset="/images/go/download.png, /images/go/download.png 1.5x, /images/go/download.png 2x"
            data-sizes="auto"
            alt="/images/go/download.png" width="700" />
    </a><figcaption class="image-caption">Go 官網下載位置</figcaption>
    </figure>
<p>下載完後，使用 <code>go version</code> 來檢查是否安裝成功：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go version
go version go1.18 darwin/amd64
</code></pre></td></tr></table>
</div>
</div><br>
<p>接著我們來看一下他的環境變數，使用 <code>go env</code>，來查看：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go env
<span class="nv">GO111MODULE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
<span class="nv">GOARCH</span><span class="o">=</span><span class="s2">&#34;amd64&#34;</span>
<span class="nv">GOBIN</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
<span class="nv">GOCACHE</span><span class="o">=</span><span class="s2">&#34;/Users/ian_zhuang/Library/Caches/go-build&#34;</span>
<span class="nv">GOENV</span><span class="o">=</span><span class="s2">&#34;/Users/ian_zhuang/Library/Application Support/go/env&#34;</span>
<span class="nv">GOEXE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
<span class="nv">GOEXPERIMENT</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
<span class="nv">GOFLAGS</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
<span class="nv">GOHOSTARCH</span><span class="o">=</span><span class="s2">&#34;amd64&#34;</span>
<span class="nv">GOHOSTOS</span><span class="o">=</span><span class="s2">&#34;darwin&#34;</span>
<span class="nv">GOINSECURE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
<span class="nv">GOMODCACHE</span><span class="o">=</span><span class="s2">&#34;/Users/ian_zhuang/go/pkg/mod&#34;</span>
<span class="nv">GONOPROXY</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
<span class="nv">GONOSUMDB</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
<span class="nv">GOOS</span><span class="o">=</span><span class="s2">&#34;darwin&#34;</span>
<span class="nv">GOPATH</span><span class="o">=</span><span class="s2">&#34;/Users/ian_zhuang/go&#34;</span>
<span class="nv">GOPRIVATE</span><span class="o">=</span><span class="s2">&#34;&#34;</span>
<span class="nv">GOPROXY</span><span class="o">=</span><span class="s2">&#34;https://proxy.golang.org,direct&#34;</span>
<span class="nv">GOROOT</span><span class="o">=</span><span class="s2">&#34;/usr/local/go&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>這邊簡單的列出來，比較重要的是</p>
<ul>
<li>GOPATH：他是有關管理程式碼和套件執行檔的地方，在 Go 1.8 版本以前，GOPATH 預設為空。從 1.8 以後，Go 安裝完後，都會直接給預設的路徑</li>
</ul>
<p>說一下這個路徑的內容，我在依照預設的路徑，像我是在 Users/使用者/go，在 go 底下新增三個資料夾：</p>
<ul>
<li>src：主要放置專案的地方</li>
<li>pkg：套件主要儲存的資料夾</li>
<li>bin：存放編譯好的執行檔案</li>
</ul>
<p>在 Go 1.11 後提供了 go modules 讓我們不一定要把專案程式碼放在 <code>$GOPATH/src</code> 中做開發，因此我們先來設定我在要放專案的資料夾，打開 <code>.bash_profile</code>：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">export GOPATH=你專案的路徑/goworkspace
$ source .bash_profile
</code></pre></td></tr></table>
</div>
</div><p>接著我們來實作第一隻 Go 程式吧，我們會依照官網的示範，但為了要介紹 modules 是什麼，所以會小修改內容。</p>
<br>
<h2 id="第一隻-go-程式">第一隻 Go 程式</h2>
<p>我們依照官網的示範教學，先建立一個資料夾(要放在我們剛剛的 <code>GOPATH</code> 目錄下方歐)，來放我們第一個 Go 程式 &ldquo;印出 Hello world&rdquo; (<a href="https://github.com/880831ian/go" target="_blank" rel="noopener noreffer">程式碼可以從此處下載</a>)：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">mkdir helloworld
cd helloworld
</code></pre></td></tr></table>
</div>
</div><br>
<p>接著下指令來新增 Go module：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go mod init helloworld
go: creating new go.mod: module helloworld
</code></pre></td></tr></table>
</div>
</div><br>
<p>如果成功，會產生一個 go.mod 檔案，我們來看看內容有什麼：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ cat go.mod
module helloworld

go 1.18
</code></pre></td></tr></table>
</div>
</div><p>go.mod 是用來定義 module 的文件，用來標示此 module 的名稱、所使用的 go 版本以及相依的 Go module。</p>
<br>
<p>我們分別再新增兩個資料夾，以及兩個 <code>.go</code> 檔，來建立我們範例所需要的環境：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">mkdir greeting cli
touch greeting/greeting.go cli/say.go
</code></pre></td></tr></table>
</div>
</div><br>
<p>到目前為止結構如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">.
├── cli
│   └── say.go
├── go.mod
└── greeting
    └── greeting.go
</code></pre></td></tr></table>
</div>
</div><p>我們來修改一下 <code>greeting.go</code> 以及 <code>say.go</code> 程式碼吧。</p>
<p><code>greeting.go</code> 是一個簡單的 package，用以顯示所傳入的字串 ; 而 <code>say.go</code> 則是以呼叫 <code>greeting.go</code> package 所提供的函式來顯示資料。</p>
<br>
<p><code>greeting.go</code> 內容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">greeting</span>

<span class="kn">import</span> <span class="s">&#34;fmt&#34;</span>

<span class="kd">func</span> <span class="nf">Say</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p><code>say.go</code> 內容：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;helloworld/greeting&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(){</span>
	<span class="nx">greeting</span><span class="p">.</span><span class="nf">Say</span><span class="p">(</span><span class="s">&#34;Hello World&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>順便來介紹一下程式裡面分別是什麼意思吧！</p>
<br>
<ul>
<li>
<p>Package：package 主要分成兩種，一個是可執行，另一個則是可重複使用的，而 <code>package main</code> 就是可執行的檔案，像我們上面這個有包含 package main 的檔案，在編譯時，就會產生一個 <code>say</code> 的執行檔，電腦就是依照此檔案執行的。</p>
</li>
<li>
<p>Import：當我們寫程式時，一定會引入其他人寫的套件。而 Go 語言的標準函式庫為開發團隊先寫好，提供一些常用的功能，當然也可以使用其他第三方套件，還滿足內建以及標準函式庫的不足。我們在 <code>greeting.go</code> 裡面引入的 <code>fmt</code> 就是開發團隊寫好的，然而在 <code>say.go</code> 裡面引入的就是<code>greeting.go</code> ，我們就可以使用其內容的函式來做使用。</p>
</li>
<li>
<p>Main Function：每個 Go 語言的專案基本上都會有一個主程式，主程式裡的程式通常都為最核心的部分。</p>
</li>
</ul>
<br>
<p>最後使用 <code>go run say.go</code> 來將此程式運行起來：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run say.go
Hello World
</code></pre></td></tr></table>
</div>
</div><p>就可以看到程式成功將 Hello World 給印出來拉！</p>
<br>
<h3 id="常見指令">常見指令</h3>
<p>接下來要簡單介紹一下常用的另外3個指令，分別是 <code>go build</code>、<code>go install</code>、<code>go clean</code>：</p>
<br>
<p><code>go get</code>：來下載套件到當前的模組，並安裝他們</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go get github.com/fatih/color
go: downloading github.com/fatih/color v1.13.0
.... 省略 ....
</code></pre></td></tr></table>
</div>
</div><br>
<p><code>go build</code>：還記得我們前面說 Go 是編譯式程式，所以我們可以將程式用 <code>go build</code> 來編譯成電腦看得懂的執行檔歐，檔案會存放在當前目錄或是指定目錄中 ~</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ ls
go.mod

$ go build cli/say.go
go.mod   say

$ ./say
Hello World
</code></pre></td></tr></table>
</div>
</div><p>多的這個 say 就是編譯後的執行檔，將他執行會顯示跟我們使用 run 來運行的一樣，顯示 Hello World。</p>
<br>
<p><code>go install</code>：如果編譯沒有錯誤，一樣跟 build 會產生執行檔，不同的是，會將執行檔，產生於 $GOPATH/bin 內。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ ls /Users/ian_zhuang/go/bin
dlv          go-outline   gomodifytags goplay       gopls        gotests      impl         staticcheck

$ go install

$ ls /Users/ian_zhuang/go/bin 
dlv          go-outline   gomodifytags goplay       gopls        gotests      hello        impl         staticcheck
</code></pre></td></tr></table>
</div>
</div><br>
<p><code>go clean</code>：執行後會將 build 產生的檔案都刪除 (install 的不會)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$  ls
go.mod   hello    .

$ go clean

$ ls 
go.mod   .
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="套件相依性管理">套件相依性管理</h3>
<p>Go modules 提供的另一個方便的功能則是套件相依性管理，接下來實際透過以下指令來安裝套件：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go get github.com/fatih/color
go: downloading github.com/fatih/color v1.13.0
go: downloading github.com/mattn/go-isatty v0.0.14
go: downloading github.com/mattn/go-colorable v0.1.9
go: downloading golang.org/x/sys v0.0.0-20210630005230-0f9fa26af87c
go: added github.com/fatih/color v1.13.0
go: added github.com/mattn/go-colorable v0.1.9
go: added github.com/mattn/go-isatty v0.0.14
go: added golang.org/x/sys v0.0.0-20210630005230-0f9fa26af87c
</code></pre></td></tr></table>
</div>
</div><br>
<p>安裝成功，可以再查看一下 go.mod：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">module github.com/880831ian/go/helloworld

go 1.18

require github.com/fatih/color v1.13.0

require (
	github.com/mattn/go-colorable v0.1.12 // indirect
	github.com/mattn/go-isatty v0.0.14 // indirect
	golang.org/x/sys v0.0.0-20220319134239-a9b59b0215f8 // indirect
)
</code></pre></td></tr></table>
</div>
</div><p>會多了下面這些 <code>require github.com/fatih/color v1.13.0</code> 代表目前專案使用 v1.13.0 版本的 <code>github.com/fatih/color</code></p>
<p>下面的 indirect 指的是被相依的套件所使用的 package</p>
<br>
<p>接著我們將 <code>greeting.go</code>、<code>say.go</code> 兩個檔案修改一下，使用我們剛剛所安裝的 package：</p>
<br>
<p><code>greeting.go</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">greeting</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>

	<span class="s">&#34;github.com/fatih/color&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Say</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">SayWithRed</span> <span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">color</span><span class="p">.</span><span class="nf">Red</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">SayWithBlue</span> <span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">color</span><span class="p">.</span><span class="nf">Blue</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">SayWithYellow</span> <span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
	<span class="nx">color</span><span class="p">.</span><span class="nf">Yellow</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>我再多 import 了剛剛的 <code>github.com/fatih.color</code>，並使用該套件的函式 <code>color</code> 來分別顯示 <code>Red</code>、<code>Blud</code>、<code>Yellow</code> 三種顏色。</p>
<br>
<p><code>say.go</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">main</span>

<span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;github.com/880831ian/go/helloworld/greeting&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">(){</span>
	<span class="nx">greeting</span><span class="p">.</span><span class="nf">Say</span><span class="p">(</span><span class="s">&#34;Hello World&#34;</span><span class="p">)</span>
	<span class="nx">greeting</span><span class="p">.</span><span class="nf">SayWithRed</span><span class="p">(</span><span class="s">&#34;Hello World&#34;</span><span class="p">)</span>
	<span class="nx">greeting</span><span class="p">.</span><span class="nf">SayWithBlue</span><span class="p">(</span><span class="s">&#34;Hello World&#34;</span><span class="p">)</span>
	<span class="nx">greeting</span><span class="p">.</span><span class="nf">SayWithYellow</span><span class="p">(</span><span class="s">&#34;Hello World&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>我們將 <code>greeting</code> 三種顯示顏色的函式帶入。</p>
<br>
<p>一樣我們來運行一下程式，來看看結果如何，這次我們直接編譯，使用 <code>go build</code> 來編譯，最後直接執行產生的執行檔：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go build cli/say.go
$ ./say
Hello World
Hello World //紅色
Hello World //藍色
Hello World //黃色
</code></pre></td></tr></table>
</div>
</div><p>由於 Makedown 沒辦法於程式碼區域顯示正確顏色，用註解標示一下XD</p>
<br>
<h2 id="變數">變數</h2>
<p>在使用變數做宣告時，要注意以下幾個 Go 保留字，不能拿來當變數名稱，其 Go 有三種宣告的方式：</p>
<br>
<figure><a class="lightgallery" href="/images/go/variable.png" title="/images/go/variable.png" data-thumbnail="/images/go/variable.png" data-sub-html="<h2>Go 保留字，不能拿來當變數名稱</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/go/variable.png"
            data-srcset="/images/go/variable.png, /images/go/variable.png 1.5x, /images/go/variable.png 2x"
            data-sizes="auto"
            alt="/images/go/variable.png" width="700" />
    </a><figcaption class="image-caption">Go 保留字，不能拿來當變數名稱</figcaption>
    </figure>
<br>
<h3 id="使用--來宣告">使用 <code>:=</code> 來宣告</h3>
<p>表示之前沒有進行宣告過。這是 Go 中最常見的變數宣告方式，但不能用縮寫方式來定義變數 (<code>foo := bar</code>) ，因為 package scope 的變數都是以 keyword 作為開頭。且只能在 function 中使用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="nx">a</span> <span class="o">:=</span> <span class="s">&#34;bar&#34;</span>
	<span class="nx">b</span> <span class="o">:=</span> <span class="mi">4</span>
	<span class="nx">c</span> <span class="o">:=</span> <span class="kc">true</span>
	<span class="c1">// 也可以簡寫成這樣
</span><span class="c1"></span>	<span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span> <span class="o">:=</span> <span class="s">&#34;bar&#34;</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="kc">true</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">);</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span><span class="nx">e</span><span class="p">,</span><span class="nx">f</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
bar <span class="m">4</span> <span class="nb">true</span>
bar <span class="m">4</span> <span class="nb">true</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="先宣告資料型態">先宣告資料型態</h3>
<p>當不知道變數的起始值，或是需要在 package scope 中宣告變數時可以使用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="nx">a</span> <span class="kt">string</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="kt">int</span> 

<span class="c1">// 也可以簡寫成這樣
</span><span class="c1"></span><span class="kd">var</span> <span class="p">(</span>
	<span class="nx">c</span> <span class="kt">string</span>
	<span class="nx">d</span> <span class="kt">float64</span>
<span class="p">)</span>
<span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="nx">a</span> <span class="p">=</span> <span class="s">&#34;Hello&#34;</span>
	<span class="nx">b</span> <span class="p">=</span> <span class="mi">123</span>
	<span class="nx">c</span> <span class="p">=</span> <span class="s">&#34;ian&#34;</span>
	<span class="nx">d</span> <span class="p">=</span> <span class="mf">3.5</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>⚠️ 不建議把變數寫在全域變數中 ⚠️</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
Hello <span class="m">123</span> ian 3.5
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="直接宣告並賦值">直接宣告並賦值</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="kd">var</span> <span class="p">(</span>
		<span class="nx">a</span> <span class="kt">string</span> <span class="p">=</span> <span class="s">&#34;Hello&#34;</span>
		<span class="nx">b</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">9999</span>
	<span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
Hello <span class="m">9999</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="常見宣告錯誤">常見宣告錯誤</h3>
<h4 id="重複宣告變數">重複宣告變數</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="nx">name</span> <span class="o">:=</span> <span class="s">&#34;ian&#34;</span>
	<span class="nx">name</span> <span class="o">:=</span> <span class="s">&#34;pinyi&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
<span class="c1"># github.com/880831ian/go/test</span>
./test.go:4:2: name declared but not used
./test.go:5:7: no new variables on left side of :<span class="o">=</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h4 id="在-main-函式外賦值">在 main 函式外賦值</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">var</span> <span class="nx">a</span> <span class="kt">int</span>
<span class="nx">b</span> <span class="o">:=</span> <span class="s">&#34;Hello&#34;</span>

<span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
<span class="c1"># github.com/880831ian/go/test</span>
./test.go:6:1: syntax error: non-declaration statement outside <span class="k">function</span> body
</code></pre></td></tr></table>
</div>
</div><p>我們可以在 main 函式外宣告變數，但無法在 main 函式外賦值</p>
<br>
<h4 id="沒有宣告就使用變數">沒有宣告就使用變數</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="nx">a</span> <span class="p">=</span> <span class="mi">123</span>
	<span class="nx">b</span> <span class="p">=</span> <span class="kc">true</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
<span class="c1"># github.com/880831ian/go/test</span>
./test.go:6:2: undefined: a
./test.go:7:2: undefined: b
./test.go:8:14: undefined: a
./test.go:8:16: undefined: b
</code></pre></td></tr></table>
</div>
</div><br>
<h2 id="go-資料型態">Go 資料型態</h2>
<p>我們在學習 Go 語言之前，要先了解一下基本的資料型態，可以簡單分為 字串、字符、整數、浮點數、布林值、映射</p>
<h3 id="字串-string">字串 String</h3>
<p>在 Go 語言中，字串必須用雙引號給匡起來，也可以使用反引號來宣告。用雙引號刮起來的字串不能包含換行，但可以包含跳脫字元，例如 <code>\n</code> 、<code>\t</code> 。由於反引號內包含的是原始字串，可以跨越多行，所以跳脫符號在原始字串中沒有任何含義。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
   <span class="kd">var</span> <span class="nx">name</span> <span class="p">=</span> <span class="s">&#34;ian&#34;</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;資料型態 name : %v(%T)\n&#34;</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span><span class="nx">name</span><span class="p">)</span>
   <span class="kd">var</span> <span class="nx">address</span> <span class="p">=</span> <span class="s">`台中市太平區`</span>
   <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;資料型態 address : %v(%T)\n&#34;</span><span class="p">,</span> <span class="nx">address</span><span class="p">,</span><span class="nx">address</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
資料型態 name : ian<span class="o">(</span>string<span class="o">)</span>
資料型態 address : 台中市太平區<span class="o">(</span>string<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="字符-character">字符 Character</h3>
<p>字串中的每一個元素叫做字符，字符會使用單引號匡起來，像是 <code>&quot;abc&quot;</code> 這個字串，其中 <code>'a'</code>、<code>'b'</code>、<code>'c'</code> 就是字符，可以從字串元素中來獲得字符。</p>
<p>Go 語言的字符有以下兩種：</p>
<ul>
<li>一種叫 byte 類型，可以叫做 uint8 類型，代表 ASCll 碼的一個字符。</li>
<li>另一種是 rune 類型，代表一個 UTF-8 字符，當需要處理中文、日文或是其他複合字符時，就會使用到 rune 類型。rune 類型等於 int32 類型。</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="kd">var</span> <span class="nx">a</span> <span class="kt">byte</span> <span class="p">=</span> <span class="sc">&#39;A&#39;</span>
	<span class="kd">var</span> <span class="nx">b</span> <span class="kt">rune</span> <span class="p">=</span> <span class="sc">&#39;嗨&#39;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%c %c\n&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span> <span class="c1">//%c 所表示的字符
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d(%T) %d(%T)\n&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span> <span class="c1">//%d 十進制表示,%T 輸出型態
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%x %x\n&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span> <span class="c1">//%x 十六進制表示
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%U %U\n&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span> <span class="c1">//%U 輸出格式為 Unicode 格式:U+hhhh的字串
</span><span class="c1"></span><span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
A 嗨
65<span class="o">(</span>uint8<span class="o">)</span> 21992<span class="o">(</span>int32<span class="o">)</span>
<span class="m">41</span> 55e8
U+0041 U+55E8
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="整數-integer">整數 Integer</h3>
<p>整數用於儲存整數。 Go 具有多種大小不一的內建整數型別，用來儲存有號數和無號數。</p>
<ul>
<li>有號數</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">型別</th>
<th style="text-align:center">大小</th>
<th style="text-align:center">範圍</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">int</td>
<td style="text-align:center">取決平台</td>
<td style="text-align:center">取決平台</td>
</tr>
<tr>
<td style="text-align:center">int 8</td>
<td style="text-align:center">8 bits</td>
<td style="text-align:center">-128 到 127</td>
</tr>
<tr>
<td style="text-align:center">int 16</td>
<td style="text-align:center">16 bits</td>
<td style="text-align:center">-2^15 到 2^15-1</td>
</tr>
<tr>
<td style="text-align:center">int 32</td>
<td style="text-align:center">32 bits</td>
<td style="text-align:center">-2^31 到 2^31-1</td>
</tr>
<tr>
<td style="text-align:center">int 64</td>
<td style="text-align:center">64 bits</td>
<td style="text-align:center">-2^63 到 -2^63-1</td>
</tr>
</tbody>
</table>
<ul>
<li>無號數</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">型別</th>
<th style="text-align:center">大小</th>
<th style="text-align:center">範圍</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">uint</td>
<td style="text-align:center">取決平台</td>
<td style="text-align:center">取決平台</td>
</tr>
<tr>
<td style="text-align:center">uint 8</td>
<td style="text-align:center">8 bits</td>
<td style="text-align:center">0 到 255</td>
</tr>
<tr>
<td style="text-align:center">uint 16</td>
<td style="text-align:center">16 bits</td>
<td style="text-align:center">0 到 2^16-1</td>
</tr>
<tr>
<td style="text-align:center">uint 32</td>
<td style="text-align:center">32 bits</td>
<td style="text-align:center">0 到 2^32-1</td>
</tr>
<tr>
<td style="text-align:center">uint 64</td>
<td style="text-align:center">64 bits</td>
<td style="text-align:center">0 到 -2^64-1</td>
</tr>
</tbody>
</table>
<p><code>int</code> 、 <code>uint</code> 的型別大小取決於平台。在 32 位元系統上，它大小為 32 位元，64 位元系統上，它的大小為 64 位元。</p>
<p>使用整數值時，除非確定會用到的大小跟範圍才使用有號數及無號數，否則應該都使用 <code>int</code> 資料型別。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">myInt8</span> <span class="kt">int8</span> <span class="p">=</span> <span class="mi">97</span>
	<span class="kd">var</span> <span class="nx">myInt</span> <span class="p">=</span> <span class="mi">1200</span>
	<span class="kd">var</span> <span class="nx">myUint</span> <span class="kt">uint</span> <span class="p">=</span> <span class="mi">500</span>
	<span class="kd">var</span> <span class="nx">myOctalNumber</span> <span class="p">=</span> <span class="mo">034</span>
	<span class="kd">var</span> <span class="nx">myHexNumber</span> <span class="p">=</span> <span class="mh">0xFF</span>  
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%d, %d, %d, %#o, %#x\n&#34;</span><span class="p">,</span> <span class="nx">myInt8</span><span class="p">,</span> <span class="nx">myInt</span><span class="p">,</span> <span class="nx">myUint</span><span class="p">,</span> <span class="nx">myOctalNumber</span><span class="p">,</span> <span class="nx">myHexNumber</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
97, 1200, 500, 034, 0xff
</code></pre></td></tr></table>
</div>
</div><p>在 Go 中，也可以使用前綴 <code>0</code> 來宣告八進制數字，或是使用 <code>0x</code> 來宣告十六進制數字。</p>
<br>
<h3 id="浮點數-float">浮點數 Float</h3>
<p>浮點數型別用於儲存小數部分的數字。Go 有兩種浮點數型別：</p>
<ul>
<li>float32：在記憶體中佔用32位元，並以單精度浮點數格式儲存。</li>
<li>float64：在記憶體中佔用64位元，並以雙精度浮點數格式儲存。</li>
</ul>
<p>浮點數的預設是 <code>float64</code>，除非初始化有為浮點數變數指定型別，否則編譯器將判定為 <code>float64</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">a</span> <span class="p">=</span> <span class="mf">245.4664</span>
	<span class="kd">var</span> <span class="nx">b</span> <span class="kt">float32</span> <span class="p">=</span> <span class="mf">1452.34</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%f(%T)\n%f(%T)\n&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
245.466400<span class="o">(</span>float64<span class="o">)</span>
1452.339966<span class="o">(</span>float32<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="布林值-bool">布林值 Bool</h3>
<p>Go 提供了一種稱為 <code>bool</code> 的資料型別來儲存布林值。它有兩個可能的值：<code>true</code> 和 <code>false</code>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">a</span> <span class="p">=</span> <span class="kc">true</span>
	<span class="kd">var</span> <span class="nx">b</span> <span class="kt">bool</span> <span class="p">=</span> <span class="kc">false</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v(%T)\n%v(%T)\n&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
true<span class="o">(</span>bool<span class="o">)</span>
false<span class="o">(</span>bool<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>布林型別也可以使用運算子 <code>&amp;&amp;</code> (與,and)、<code>||</code> (和,or)、<code>!</code> (否定)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">a</span> <span class="p">=</span> <span class="mi">4</span> <span class="o">&lt;=</span> <span class="mi">7</span> 
	<span class="kd">var</span> <span class="nx">b</span> <span class="p">=</span> <span class="mi">10</span> <span class="o">!=</span> <span class="mi">10</span>
	<span class="kd">var</span> <span class="nx">c</span> <span class="p">=</span> <span class="mi">10</span> <span class="p">&gt;</span> <span class="mi">20</span> <span class="o">&amp;&amp;</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">5</span> 
	<span class="kd">var</span> <span class="nx">d</span> <span class="p">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">4</span> <span class="o">||</span> <span class="mi">10</span> <span class="o">/</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">3</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\n%v\n%v\n%v\n&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">c</span><span class="p">,</span><span class="nx">d</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
<span class="nb">true</span>
<span class="nb">false</span>
<span class="nb">false</span>
<span class="nb">true</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="映射-map">映射 Map</h3>
<p>映射 (Map) 是 Go 內建的類型，是一種鍵值(key-value)的集合，可以透過 key 快速查詢並找到數據。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="kd">var</span> <span class="nx">map3</span> <span class="p">=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="mi">99</span> <span class="p">:</span> <span class="s">&#34;Go&#34;</span><span class="p">,</span> <span class="mi">87</span> <span class="p">:</span> <span class="s">&#34;Python&#34;</span><span class="p">,</span> <span class="mi">79</span> <span class="p">:</span> <span class="s">&#34;Java&#34;</span><span class="p">,</span> <span class="mi">93</span><span class="p">:</span> <span class="s">&#34;Html&#34;</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">map3</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;map3[99] =&#34;</span><span class="p">,</span><span class="nx">map3</span><span class="p">[</span><span class="mi">99</span><span class="p">],</span><span class="s">&#34;map3[79] =&#34;</span><span class="p">,</span><span class="nx">map3</span><span class="p">[</span><span class="mi">79</span><span class="p">])</span>
	<span class="nx">map3</span><span class="p">[</span><span class="mi">79</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;PHP&#34;</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;修改數據後，map3[99] =&#34;</span><span class="p">,</span><span class="nx">map3</span><span class="p">[</span><span class="mi">99</span><span class="p">],</span><span class="s">&#34;map3[79] =&#34;</span><span class="p">,</span><span class="nx">map3</span><span class="p">[</span><span class="mi">79</span><span class="p">])</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">map<span class="o">[</span>79:Java 87:Python 93:Html 99:Go<span class="o">]</span>
map3<span class="o">[</span>99<span class="o">]</span> <span class="o">=</span> Go map3<span class="o">[</span>79<span class="o">]</span> <span class="o">=</span> Java
修改數據後，map3<span class="o">[</span>99<span class="o">]</span> <span class="o">=</span> Go map3<span class="o">[</span>79<span class="o">]</span> <span class="o">=</span> PHP
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="數字型別的運算">數字型別的運算</h3>
<p>Go 提供了多種用於數字、浮點數型別執行運算的運算子</p>
<ul>
<li>算術運算子：<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>%</code></li>
<li>比較運算子：<code>==</code>、<code>!=</code>、<code>&lt;</code>、<code>&gt;</code>、<code>&lt;=</code>、<code>&gt;=</code></li>
<li>位元運算子：<code>&amp;</code>、 <code>|</code>、 <code>^</code>、 <code>&lt;&lt;</code>、<code>&gt;&gt;</code></li>
<li>遞增和遞減運算子：<code>++</code>、<code>--</code></li>
<li>賦值運算子：<code>+=</code>、<code>-=</code>、<code>*=</code>、<code>/=</code>、<code>%=</code>、<code>&lt;&lt;=</code>、<code>&gt;&gt;=</code>、<code>&amp;=</code>、<code>|=</code>、<code>^=</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">import</span> <span class="p">(</span>
	<span class="s">&#34;fmt&#34;</span>
	<span class="s">&#34;math&#34;</span>
<span class="p">)</span>
 
<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="p">=</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span>
	<span class="kd">var</span> <span class="nx">res1</span> <span class="p">=</span> <span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> 
	<span class="nx">a</span><span class="o">++</span> 
	<span class="nx">b</span> <span class="o">+=</span> <span class="mi">10</span> 
	<span class="kd">var</span> <span class="nx">res2</span> <span class="p">=</span> <span class="nx">a</span> <span class="p">^</span> <span class="nx">b</span> 
	<span class="kd">var</span> <span class="nx">r</span> <span class="p">=</span> <span class="mf">3.5</span>
	<span class="kd">var</span> <span class="nx">res3</span> <span class="p">=</span> <span class="nx">math</span><span class="p">.</span><span class="nx">Pi</span> <span class="o">*</span> <span class="nx">r</span> <span class="o">*</span> <span class="nx">r</span> 
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;res1 : %v, res2 : %v, res3 : %v\n&#34;</span><span class="p">,</span> <span class="nx">res1</span><span class="p">,</span> <span class="nx">res2</span><span class="p">,</span> <span class="nx">res3</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">res1 : 40, res2 : 10, res3 : 38.48451000647496
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="型別轉換">型別轉換</h3>
<p>Go 有一個強型別系統，它不允許混合型別。舉例來說：不能把 <code>int</code> 變數加到 <code>float64</code> 變數中，也不能將 <code>int</code> 變數加到 <code>int64</code> 變數中。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">a</span> <span class="kt">int64</span> <span class="p">=</span> <span class="mi">4</span>
	<span class="kd">var</span> <span class="nx">b</span> <span class="kt">int</span> <span class="p">=</span> <span class="nb">int</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
	<span class="kd">var</span> <span class="nx">c</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">500</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span><span class="nx">a</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
<span class="c1"># command-line-arguments</span>
./.:11:19: invalid operation: a + c <span class="o">(</span>mismatched types int64 and int<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><p>就會跳出錯誤說明別不同，無法直接做運算，那要怎麼辦呢！？</p>
<br>
<p>使用型別轉換，將型別值轉成相同的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">a</span> <span class="kt">int64</span> <span class="p">=</span> <span class="mi">4</span>
	<span class="kd">var</span> <span class="nx">b</span> <span class="kt">int</span> <span class="p">=</span> <span class="nb">int</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span>
	<span class="kd">var</span> <span class="nx">c</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">500</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span><span class="o">+</span><span class="nx">c</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
<span class="m">4</span> <span class="m">4</span> <span class="m">504</span>
</code></pre></td></tr></table>
</div>
</div><p>一般將值 <code>v</code> 轉換為型別 <code>T</code> 的語法是 <code>T(V)</code> 。</p>
<br>
<h2 id="go-資料結構">Go 資料結構</h2>
<h3 id="指標-pointer">指標 Pointer</h3>
<p>指標是程式語言中的資料結構及其物件或變數，用來表示或儲存記憶體位址，這個位址的值直接指向存在該位址物件的值。</p>
<p>Go 支持指標，指標的聲明方式為 *T，可以藉由變數名稱前面加 <code>&amp;</code> 來獲得變數的位址，由於 Go 支持 GC ，在 Go 語言中不支持指標的運算。</p>
<p>表示法</p>
<ul>
<li>使用 <code>&amp;</code> 來獲得指標位址</li>
<li>使用 <code>*</code> 來獲得指標所指向的值</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="kd">var</span> <span class="nx">a</span> <span class="kt">int</span> <span class="p">=</span> <span class="mi">2</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;a 位址 = &#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">a</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;a 的值 = %v\n&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">)</span>
 	<span class="kd">var</span> <span class="nx">pInt</span> <span class="o">*</span><span class="kt">int</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">a</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;pInt = %v\n&#34;</span><span class="p">,</span> <span class="nx">pInt</span><span class="p">);</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;pInt 位址 = %v\n&#34;</span><span class="p">,</span><span class="o">&amp;</span><span class="nx">pInt</span><span class="p">);</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;pInt 指向的值 = %v\n&#34;</span><span class="p">,</span><span class="o">*</span><span class="nx">pInt</span><span class="p">);</span>
	<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
a <span class="nv">位址</span> <span class="o">=</span>  0xc0000b2008
a <span class="nv">的值</span> <span class="o">=</span> <span class="m">2</span>
<span class="nv">pInt</span> <span class="o">=</span> 0xc0000b2008
pInt <span class="nv">位址</span> <span class="o">=</span> 0xc0000ac020
pInt <span class="nv">指向的值</span> <span class="o">=</span> <span class="m">2</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="陣列-array">陣列 Array</h3>
<p>我們已經學會要怎麼宣告變數，以及如何使用變數來儲存值。但當我們今天想要儲存多個數值，使用原本的方式，需要創建許多變數才能儲存，因此有了陣列可以來儲存大量資料。</p>
<p>陣列 (Array) 是由同類型的元素集合所組成的資料結構，分配一塊連續的記憶體來儲存。利用元素的索引可以計算出該元素所對應的儲存位址。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="kd">var</span> <span class="nx">a</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="kt">float32</span>
	<span class="nx">a</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">=</span> <span class="mf">1.4</span>
	<span class="nx">a</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">=</span> <span class="mf">3.14</span>

	<span class="c1">// 也可以寫成這樣
</span><span class="c1"></span>	<span class="kd">var</span> <span class="nx">b</span> <span class="p">=</span> <span class="p">[]</span> <span class="kt">int</span><span class="p">{</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">99</span><span class="p">,</span><span class="mi">333</span><span class="p">}</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
<span class="o">[</span>1.4 3.14<span class="o">]</span> <span class="o">[</span><span class="m">10</span> <span class="m">20</span> <span class="m">99</span> 333<span class="o">]</span>
<span class="m">2</span> <span class="m">4</span>
</code></pre></td></tr></table>
</div>
</div><br>
上面有提到他會分配連續記憶體來儲存，我們來看看他是怎麼存的！
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="nx">a</span> <span class="o">:=</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;a 的記憶體分配位置 %p \n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">a</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;陣列 a 的索引 0 記憶體分配位置 %p \n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;陣列 a 的索引 1 記憶體分配位置 %p \n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;陣列 a 的索引 2 記憶體分配位置 %p \n&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">a</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run . 
a 的記憶體分配位置 0xc0000180f0 
陣列 a 的索引 <span class="m">0</span> 記憶體分配位置 0xc0000180f0 
陣列 a 的索引 <span class="m">1</span> 記憶體分配位置 0xc0000180f8 
陣列 a 的索引 <span class="m">2</span> 記憶體分配位置 0xc000018100 
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="切片-slice">切片 Slice</h3>
<p>前面提到陣列的使用，陣列使用上是實值類型以及陣列長度不可變的情況下，間接限制了使用場景。</p>
<p>切片 (slice) 是 Go 對陣列在進行一層的封裝，是一個擁有相同類型元素的可變長度序列，可以非常靈活運用，自動擴容，可以快速且方便的操作數據集合。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="nx">a</span> <span class="o">:=</span> <span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="kt">int</span><span class="p">{</span><span class="mi">55</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">58</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">66</span><span class="p">}</span>
	<span class="nx">b</span> <span class="o">:=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="c1">//基於 a 陣列創建切片，等於 b 包含 a[1],a[2],a[3]
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v(%T)\n&#34;</span><span class="p">,</span><span class="nx">b</span><span class="p">,</span><span class="nx">b</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;len = %v\n&#34;</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;cap = %v\n&#34;</span><span class="p">,</span><span class="nb">cap</span><span class="p">(</span><span class="nx">b</span><span class="p">))</span>	
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="o">[</span><span class="m">75</span> <span class="m">58</span> 60<span class="o">]([]</span>int<span class="o">)</span>
<span class="nv">len</span> <span class="o">=</span> <span class="m">3</span>
<span class="nv">cap</span> <span class="o">=</span> <span class="m">4</span>
</code></pre></td></tr></table>
</div>
</div><p>len(b) 表示可見元素有幾個(直接打印元素看到的元素個數)，而 cap(b) 表示所有元素有幾個。
[1:4] 代表從第二個元素開始 (0為第一個元素，1位第二的元素)，取到第4個元素 (下標為 4-1=3，下標3代表第四個元素)</p>
<br>
<p>使用 <code>make</code> 創建切片</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="nx">a</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="c1">//創建長度 5,容量 10 的切片
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;a = %v, len(a) = %v, cap(a) = %v\n&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nb">cap</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">a</span> <span class="o">=</span> <span class="o">[</span><span class="m">0</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0</span> 0<span class="o">]</span>, len<span class="o">(</span>a<span class="o">)</span> <span class="o">=</span> 5, cap<span class="o">(</span>a<span class="o">)</span> <span class="o">=</span> <span class="m">10</span>
</code></pre></td></tr></table>
</div>
</div><p>使用 make 創建長度5 ,容量 10 的切片</p>
<br>
<p>使用 <code>append</code> 來達成新增元素</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="nx">a</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">int</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c1">//創建長度 5,容量 10 的切片
</span><span class="c1"></span>	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;a = %v, len(a) = %v, cap(a) = %v\n&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nb">cap</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;指標為 %p\n&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
	<span class="nx">a</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;a = %v, len(a) = %v, cap(a) = %v\n&#34;</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span><span class="nb">cap</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;擴容後指標 = %p 改變\n&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="nv">a</span> <span class="o">=</span> <span class="o">[</span><span class="m">0</span> 0<span class="o">]</span>, len<span class="o">(</span>a<span class="o">)</span> <span class="o">=</span> 2, cap<span class="o">(</span>a<span class="o">)</span> <span class="o">=</span> <span class="m">2</span>
指標為 0xc000014080
<span class="nv">a</span> <span class="o">=</span> <span class="o">[</span><span class="m">0</span> <span class="m">0</span> 10<span class="o">]</span>, len<span class="o">(</span>a<span class="o">)</span> <span class="o">=</span> 3, cap<span class="o">(</span>a<span class="o">)</span> <span class="o">=</span> <span class="m">4</span>
<span class="nv">擴容後指標</span> <span class="o">=</span> 0xc000022080 改變
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="結構-struct">結構 Struct</h3>
<p>我們介紹的變數都是儲存單一的值或是多個相同型態的值，那如果要用變數表示較複雜的概念，像是紀錄一個人的名字、年齡或是身高時，由於這些是不同的<strong>資料型態</strong>，所以要記錄下來時，就必須使用不同的容器，這裡會介紹 Go 語言中的結構 Struct：</p>
<p><strong>建立結構</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Student</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">Id</span> <span class="kt">int</span>
    <span class="nx">Name</span> <span class="kt">string</span>
    <span class="nx">Score</span> <span class="kt">float64</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">student</span> <span class="o">:=</span> <span class="nx">Student</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#34;ian&#34;</span><span class="p">,</span> <span class="mf">89.4</span><span class="p">}</span> 
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">student</span><span class="p">)</span> 
<span class="p">}</span>

</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
<span class="o">{</span><span class="m">1</span> ian 89.4<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>我們先宣告一個名為 Student 的 <code>struct</code> 結構，裡面屬性有 Id 和 Name 以及 Score，再以此結構宣告一個變數 student 並填入屬性，以顯示不同資料型態的值。</p>
<br>
<h2 id="go-控制流程">Go 控制流程</h2>
<h3 id="if">if</h3>
<p>結構裡會有一個條件，這個條件是個布林值，如果為 true，則會執行括號裡的程式碼，相反的，如果為 false，則會直接跳過：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="kd">var</span> <span class="nx">x</span> <span class="p">=</span> <span class="mi">2</span>
	<span class="kd">var</span> <span class="nx">y</span> <span class="p">=</span> <span class="mi">1</span>

	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;x = &#34;</span><span class="p">,</span><span class="nx">x</span><span class="p">,</span><span class="s">&#34;,y = &#34;</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span>
	
	<span class="k">if</span> <span class="nx">x</span><span class="o">==</span><span class="nx">y</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v 等於 %v\n&#34;</span><span class="p">,</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span>
	<span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v 不等於 %v\n&#34;</span><span class="p">,</span><span class="nx">x</span><span class="p">,</span><span class="nx">y</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
<span class="nv">x</span> <span class="o">=</span>  <span class="m">2</span> ,y <span class="o">=</span>  <span class="m">1</span>
<span class="m">2</span> 不等於 <span class="m">1</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="switch">switch</h3>
<p>switch 其目的是簡化 if 的條件，swtich 會檢查符合的條件，並且執行條件內的程式碼，如果都沒有符合，則會執行 default 內的程式碼：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="nx">x</span> <span class="o">:=</span> <span class="mi">12</span>
	<span class="k">switch</span> <span class="p">{</span>
	<span class="k">case</span> <span class="nx">x</span> <span class="p">&lt;</span> <span class="mi">10</span><span class="p">:</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v 小於 10\n&#34;</span><span class="p">,</span><span class="nx">x</span><span class="p">)</span>
	<span class="k">case</span> <span class="nx">x</span> <span class="p">&lt;</span> <span class="mi">20</span><span class="p">:</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v 大於等於10, 小於 20\n&#34;</span><span class="p">,</span><span class="nx">x</span><span class="p">)</span>
	<span class="k">default</span><span class="p">:</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v 大於 20\n&#34;</span><span class="p">,</span><span class="nx">x</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
<span class="m">12</span> 大於等於10, 小於 <span class="m">20</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h2 id="go-迴圈">Go 迴圈</h2>
<p>迴圈是每個程式語言必備的函式，藉以迴圈來達成反覆或是循環的動作。而 Go 語言的迴圈只有使用 <code>for</code> 迴圈來表達三種不同的迴圈 (for、while、loop)：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">10</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
<span class="m">0</span>
<span class="m">1</span>
<span class="m">2</span>
<span class="m">3</span>
<span class="m">4</span>
<span class="m">5</span>
<span class="m">6</span>
<span class="m">7</span>
<span class="m">8</span>
<span class="m">9</span>
<span class="m">10</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p><strong>break</strong></p>
<p>也可以使用 <code>break</code>，依條件需求讓迴圈提早跳出結束：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span> <span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">5</span> <span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">i</span> <span class="p">&gt;</span> <span class="mi">3</span> <span class="p">{</span>
			<span class="k">break</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
<span class="m">0</span>
<span class="m">1</span>
<span class="m">2</span>
<span class="m">3</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p><strong>Continue</strong></p>
<p>或是使用 <code>continue</code> 若符合條件，便會跳過到此迴圈，直接進入下個迭代：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
		<span class="k">if</span> <span class="nx">i</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
			<span class="k">continue</span>
		<span class="p">}</span>
		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
<span class="m">1</span>
<span class="m">3</span>
<span class="m">5</span>
<span class="m">7</span>
<span class="m">9</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p><strong>GoTo</strong></p>
<p>使用 goto 可以無條件轉移到程式中指定的行</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span> <span class="p">(){</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;1&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;2&#34;</span><span class="p">)</span>
	<span class="k">goto</span> <span class="nx">labele1</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;3&#34;</span><span class="p">)</span>
<span class="nx">labele1</span><span class="p">:</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;4&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;5&#34;</span><span class="p">)</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;6&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
<span class="m">1</span>
<span class="m">2</span>
<span class="m">4</span>
<span class="m">5</span>
<span class="m">6</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h2 id="go-方法-method">Go 方法 Method</h2>
<p>Go 語言不像 Python 有 class ，但還是有提供可以在某種型態上定義方法(method)，method 其實是作用在接收器 (receiver) 上的一種函式，接收器要是某一種型別的變數，所以其實 method 也算是一種特殊型別的函式。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Vertex</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">x</span><span class="p">,</span><span class="nx">y</span> <span class="kt">float64</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">v</span> <span class="nx">Vertex</span><span class="p">)</span> <span class="nf">Abs</span><span class="p">()</span> <span class="kt">float64</span> <span class="p">{</span>
	<span class="k">return</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Sqrt</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">v</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">v</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">v</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="nx">v</span> <span class="o">:=</span> <span class="nx">Vertex</span><span class="p">{</span><span class="mi">5</span><span class="p">,</span><span class="mi">12</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nf">Abs</span><span class="p">())</span>
<span class="p">}</span> 
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
<span class="m">13</span>
</code></pre></td></tr></table>
</div>
</div><p>一開始先宣告一個名為 Vertex 結構型態，裡面的屬性包含 ｘ、y (float64)，接著就是撰寫一個 method 了，這個 method 是以 Vertex 作為接收器， method 名稱是 Abs，最後回傳浮點數，接著 method 裡頭，即為對接收器的運算並回傳值。</p>
<br>
<p>我們來看看如果使用 function 要怎麼來達成</p>
<p><strong>方法 (Method) vs 函式 (Function)</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Vertex</span> <span class="kd">struct</span> <span class="p">{</span>
	<span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="kt">float64</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">Abs</span><span class="p">(</span><span class="nx">v</span> <span class="nx">Vertex</span><span class="p">)</span> <span class="kt">float64</span><span class="p">{</span>
	<span class="k">return</span> <span class="nx">math</span><span class="p">.</span><span class="nf">Sqrt</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">v</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">v</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">v</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span> <span class="p">()</span> <span class="p">{</span>
	<span class="nx">v</span> <span class="o">:=</span> <span class="nx">Vertex</span><span class="p">{</span><span class="mi">5</span><span class="p">,</span><span class="mi">12</span><span class="p">}</span>
	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nf">Abs</span><span class="p">(</span><span class="nx">v</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
<span class="m">13</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h2 id="go-介面-interface">Go 介面 Interface</h2>
<p>Interface 的概念有點像是藍圖，先定義某個方法的名稱 (function name)、會接收到的參數以及型別 (list of argument types)、會回傳的值與型別 (list of return types)。定義好藍圖之後，並不用去管實作的細節，實作的細節會由每個型別自行定義實作。</p>
<p><strong>empty interface</strong></p>
<p>沒有定義任何方法的 interface 稱作 empty interface，由於所有的 types 都能夠實作 empty interface，因此它的值會是 any type：(因為目前沒有被賦值，所以都會回傳 <code>nil</code>)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">value</span> <span class="kd">interface</span><span class="p">{}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">v</span> <span class="nx">value</span>
    <span class="nf">describe</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="c1">// (&lt;nil&gt;, &lt;nil&gt;)
</span><span class="c1"></span>
    <span class="nx">v</span> <span class="p">=</span> <span class="mi">42</span>
    <span class="nf">describe</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="c1">//(42, int)
</span><span class="c1"></span>
    <span class="nx">v</span> <span class="p">=</span> <span class="s">&#34;hello&#34;</span>
    <span class="nf">describe</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="c1">// (hello, string)
</span><span class="c1"></span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">describe</span><span class="p">(</span><span class="nx">v</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;(%v, %T)\n&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
value is &lt;nil&gt;
<span class="nb">type</span> is &lt;nil&gt;
</code></pre></td></tr></table>
</div>
</div><br>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">type</span> <span class="nx">Person</span> <span class="kd">interface</span> <span class="p">{</span>
    <span class="nf">getFullName</span><span class="p">()</span> <span class="kt">string</span>
    <span class="nf">getSalary</span><span class="p">()</span> <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">type</span> <span class="nx">Employee</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">firstName</span> <span class="kt">string</span>
    <span class="nx">lastName</span>  <span class="kt">string</span>
    <span class="nx">salary</span>    <span class="kt">int</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">e</span> <span class="nx">Employee</span><span class="p">)</span> <span class="nf">getFullName</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">firstName</span> <span class="o">+</span> <span class="s">&#34; &#34;</span> <span class="o">+</span> <span class="nx">e</span><span class="p">.</span><span class="nx">lastName</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="p">(</span><span class="nx">e</span> <span class="nx">Employee</span><span class="p">)</span> <span class="nf">getSalary</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">e</span><span class="p">.</span><span class="nx">salary</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">p</span> <span class="nx">Person</span> <span class="p">=</span> <span class="nx">Employee</span><span class="p">{</span><span class="s">&#34;ian&#34;</span><span class="p">,</span> <span class="s">&#34;Zhuang&#34;</span><span class="p">,</span> <span class="mi">2000</span><span class="p">}</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;full name : %v ,Salary : %v\n&#34;</span><span class="p">,</span> <span class="nx">p</span><span class="p">.</span><span class="nf">getFullName</span><span class="p">(),</span><span class="nx">p</span><span class="p">.</span><span class="nf">getSalary</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
full name : ian Zhuang ,Salary : <span class="m">2000</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h2 id="goroutine">Goroutine</h2>
<p>有人把 Go 比作 21 世紀的 C 語言，第一是因為 Go 語言設計簡單，第二，21 世紀最重要的就是並行程式設計，而 Go 從語言層面就支援了併發。</p>
<p>Goroutine 是 Go 語言實現併發的一種方式。</p>
<p>Goroutine 是一種非常輕量級的執行緒，它是Go語言併發設計的核心。執行 Goroutine 只需極少的記憶體，可同時執行成千上萬個併發的任務。</p>
<br>
<h3 id="單執行緒">單執行緒</h3>
<p>我們先來看看一般的單執行緒</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">say</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">say</span><span class="p">(</span><span class="s">&#34;world&#34;</span><span class="p">)</span>
    <span class="nf">say</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
world
world
hello
hello
</code></pre></td></tr></table>
</div>
</div><p>在單執行緒下，每行程式碼都會依照順序執行。</p>
<br>
<figure><a class="lightgallery" href="/images/go/single-thread.png" title="/images/go/single-thread.png" data-thumbnail="/images/go/single-thread.png" data-sub-html="<h2>單執行緒 (Go 的並發：Goroutine 與 Channel 介紹)</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/go/single-thread.png"
            data-srcset="/images/go/single-thread.png, /images/go/single-thread.png 1.5x, /images/go/single-thread.png 2x"
            data-sizes="auto"
            alt="/images/go/single-thread.png" width="400" />
    </a><figcaption class="image-caption">單執行緒 (<a href="https://peterhpchen.github.io/2020/03/08/goroutine-and-channel.html" target="_blank" rel="noopener noreffer">Go 的並發：Goroutine 與 Channel 介紹</a>)</figcaption>
    </figure>
<br>
<h3 id="多執行緒">多執行緒</h3>
<p>在多執行緒下，最多可以同時執行與 CPU 數相等的 Goroutine。要如何使用多執行緒，使用 goroutine 來執行多併發，只要使用 <code>go</code> 這個關鍵字來執行 func 就可以了 !</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">say</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">go</span> <span class="nf">say</span><span class="p">(</span><span class="s">&#34;world&#34;</span><span class="p">)</span>
    <span class="nf">say</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
hello
world
world
hello
</code></pre></td></tr></table>
</div>
</div><p>如此一來, <code>say(&quot;world&quot;)</code> 會跑在另一個執行緒(Goroutine)上，使其並行執行。</p>
<br>
<figure><a class="lightgallery" href="/images/go/multi-thread.png" title="/images/go/multi-thread.png" data-thumbnail="/images/go/multi-thread.png" data-sub-html="<h2>多執行緒 (Go 的並發：Goroutine 與 Channel 介紹)</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/go/multi-thread.png"
            data-srcset="/images/go/multi-thread.png, /images/go/multi-thread.png 1.5x, /images/go/multi-thread.png 2x"
            data-sizes="auto"
            alt="/images/go/multi-thread.png" width="300" />
    </a><figcaption class="image-caption">多執行緒 (<a href="https://peterhpchen.github.io/2020/03/08/goroutine-and-channel.html" target="_blank" rel="noopener noreffer">Go 的並發：Goroutine 與 Channel 介紹</a>)</figcaption>
    </figure>
<br>
<h3 id="等待">等待</h3>
<p>多執行緒下，經常需要處理的是執行緒之間的狀態管理，其中一個經常發生的事情是等待。</p>
<p>例如A執行緒需要等B執行緒計算並取得資料後才能繼續往下執行，在這情況下等待就變得十分重要。我們會介紹三個等待的方式，並說明其缺點。</p>
<ul>
<li>time.sleep：休眠指定時間</li>
<li>sync.WaitGroup：等待直到指定數量的 Done() 呼叫</li>
<li>Channel 阻塞： Channel 阻塞機制，使用接收時等待的特性避免執行緒繼續執行</li>
</ul>
<h4 id="timesleep">time.sleep</h4>
<p>使 Goroutine 休眠，讓其他的 Goroutine 在 main 結束前有時間執行完成。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">say</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">go</span> <span class="nf">say</span><span class="p">(</span><span class="s">&#34;world&#34;</span><span class="p">)</span>
    <span class="k">go</span> <span class="nf">say</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">)</span>

    <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
world
world
hello
hello
</code></pre></td></tr></table>
</div>
</div><p>缺點：休息指定時間可能會比 Goroutine 需要執行的時間長或短，太長會耗費多餘的時間，太短會使其他 Goroutine 無法完成。</p>
<br>
<figure><a class="lightgallery" href="/images/go/timesleep.png" title="/images/go/timesleep.png" data-thumbnail="/images/go/timesleep.png" data-sub-html="<h2>time.sleep (Go 的並發：Goroutine 與 Channel 介紹)</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/go/timesleep.png"
            data-srcset="/images/go/timesleep.png, /images/go/timesleep.png 1.5x, /images/go/timesleep.png 2x"
            data-sizes="auto"
            alt="/images/go/timesleep.png" width="300" />
    </a><figcaption class="image-caption">time.sleep (<a href="https://peterhpchen.github.io/2020/03/08/goroutine-and-channel.html" target="_blank" rel="noopener noreffer">Go 的並發：Goroutine 與 Channel 介紹</a>)</figcaption>
    </figure>
<br>
<h4 id="syncwaitgroup">sync.WaitGroup</h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">say</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">wg</span> <span class="o">*</span><span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">defer</span> <span class="nx">wg</span><span class="p">.</span><span class="nf">Done</span><span class="p">()</span>

    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">wg</span> <span class="o">:=</span> <span class="nb">new</span><span class="p">(</span><span class="nx">sync</span><span class="p">.</span><span class="nx">WaitGroup</span><span class="p">)</span>
    <span class="nx">wg</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">go</span> <span class="nf">say</span><span class="p">(</span><span class="s">&#34;world&#34;</span><span class="p">,</span> <span class="nx">wg</span><span class="p">)</span>
    <span class="k">go</span> <span class="nf">say</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">,</span> <span class="nx">wg</span><span class="p">)</span>

    <span class="nx">wg</span><span class="p">.</span><span class="nf">Wait</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
hello
world
world
hello
</code></pre></td></tr></table>
</div>
</div><p>在程式碼尾端加上 wg.Wait()，需要讓他達成一些條件，才可以往後執行，而這個條件，就是收到 wg.Done() 的呼叫次數。而這個次數，即是 wg.Add(2) 裡的數字2。</p>
<ul>
<li>優點：避免時間預估的錯誤</li>
<li>缺點：需要手動配置對應的數量</li>
</ul>
<br>
<figure><a class="lightgallery" href="/images/go/wait-group.png" title="/images/go/wait-group.png" data-thumbnail="/images/go/wait-group.png" data-sub-html="<h2>sync.WaitGroup (Go 的並發：Goroutine 與 Channel 介紹)</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/go/wait-group.png"
            data-srcset="/images/go/wait-group.png, /images/go/wait-group.png 1.5x, /images/go/wait-group.png 2x"
            data-sizes="auto"
            alt="/images/go/wait-group.png" width="400" />
    </a><figcaption class="image-caption">sync.WaitGroup (<a href="https://peterhpchen.github.io/2020/03/08/goroutine-and-channel.html" target="_blank" rel="noopener noreffer">Go 的並發：Goroutine 與 Channel 介紹</a>)</figcaption>
    </figure>
<br>
<h4 id="channel-阻塞">Channel 阻塞</h4>
<p>Channel 原為 Goroutine 溝通時使用的，但因其阻塞的特性，使其可以當作等待 Goroutine 的方法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">say</span><span class="p">(</span><span class="nx">s</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">c</span> <span class="kd">chan</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="mi">100</span> <span class="o">*</span> <span class="nx">time</span><span class="p">.</span><span class="nx">Millisecond</span><span class="p">)</span>
        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="nx">c</span> <span class="o">&lt;-</span> <span class="s">&#34;FINISH&#34;</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">ch</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">string</span><span class="p">)</span>

    <span class="k">go</span> <span class="nf">say</span><span class="p">(</span><span class="s">&#34;world&#34;</span><span class="p">,</span> <span class="nx">ch</span><span class="p">)</span>
    <span class="k">go</span> <span class="nf">say</span><span class="p">(</span><span class="s">&#34;hello&#34;</span><span class="p">,</span> <span class="nx">ch</span><span class="p">)</span>

    <span class="o">&lt;-</span><span class="nx">ch</span>
    <span class="o">&lt;-</span><span class="nx">ch</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
hello
world
hello
world
</code></pre></td></tr></table>
</div>
</div><p>兩個 Goroutine ( <code>say(&quot;world&quot;, ch)</code> 、 <code>say(&quot;hello&quot;, ch)</code> ) ，因此需要等待兩個 FINISH 推入 Channel 中才能結束 Main Goroutine。</p>
<ul>
<li>優點：避免時間預估的錯誤、語法簡潔</li>
</ul>
<br>
<figure><a class="lightgallery" href="/images/go/channel-wait.png" title="/images/go/channel-wait.png" data-thumbnail="/images/go/channel-wait.png" data-sub-html="<h2>Channel 阻塞 (Go 的並發：Goroutine 與 Channel 介紹)</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/go/channel-wait.png"
            data-srcset="/images/go/channel-wait.png, /images/go/channel-wait.png 1.5x, /images/go/channel-wait.png 2x"
            data-sizes="auto"
            alt="/images/go/channel-wait.png" width="400" />
    </a><figcaption class="image-caption">Channel 阻塞 (<a href="https://peterhpchen.github.io/2020/03/08/goroutine-and-channel.html" target="_blank" rel="noopener noreffer">Go 的並發：Goroutine 與 Channel 介紹</a>)</figcaption>
    </figure>
<br>
<h2 id="channel">Channel</h2>
<p>Channel 有兩個強大的處理能力，等待以及變數共享。Channel 可以想成一條管線，這條管線可以推入數值，並且也可以將數值拉取出來。</p>
<p>因為 Channel 會等待至另一端完成推入/拉出的動作後才會繼續往下處理，這樣的特性使其可以在 Goroutines 間可以同步的處理資料或是剛剛提到的等待</p>
<br>
<ul>
<li>Channel 基本操作</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go">	<span class="nx">ch</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">)</span>    <span class="c1">//創建一個Channel ch
</span><span class="c1"></span>	<span class="nx">ch</span> <span class="o">&lt;-</span> <span class="nx">u</span>                 <span class="c1">//將值u傳送到 Channel ch裡
</span><span class="c1"></span>	<span class="nx">v</span> <span class="o">:=</span> <span class="o">&lt;-</span> <span class="nx">ch</span>              <span class="c1">//從Channel ch中接收數據 ，並且將其賦值給變數v
</span><span class="c1"></span>	<span class="nb">close</span><span class="p">(</span><span class="nx">ch</span><span class="p">)</span>               <span class="c1">//關閉channel
</span></code></pre></td></tr></table>
</div>
</div><br>
<p><strong>多執行緒下的共享變數</strong></p>
<p>在執行緒間使用同樣的變數時，最重要的是確保變數在當前的正確性，在沒有控制的情況下極有可能發生問題。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">total</span> <span class="o">:=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">1000</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">total</span><span class="o">++</span>
        <span class="p">}()</span>
    <span class="p">}</span>
    <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">total</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ go run .
<span class="m">986</span>
</code></pre></td></tr></table>
</div>
</div><p>為什麼會明明是用for 跑 1000 累加，但最後只有 900 多呢？我們來看一下下面的例子</p>
<br>
<figure><a class="lightgallery" href="/images/go/total-error.png" title="/images/go/total-error.png" data-thumbnail="/images/go/total-error.png" data-sub-html="<h2>多執行緒下的共享變數 - 錯誤 (Go 的並發：Goroutine 與 Channel 介紹)</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/go/total-error.png"
            data-srcset="/images/go/total-error.png, /images/go/total-error.png 1.5x, /images/go/total-error.png 2x"
            data-sizes="auto"
            alt="/images/go/total-error.png" width="500" />
    </a><figcaption class="image-caption">多執行緒下的共享變數 - 錯誤 (<a href="https://peterhpchen.github.io/2020/03/08/goroutine-and-channel.html" target="_blank" rel="noopener noreffer">Go 的並發：Goroutine 與 Channel 介紹</a>)</figcaption>
    </figure>
<br>
<p>假設目前加到28，在多執行緒的情況下：</p>
<p>goroutine1 取值 28 做運算</p>
<p>goroutine2 有可能在 goroutine1 做 total++ 前就取 total 的值，因此有可能取到 28</p>
<p>這樣的情況下做兩次加法的結果會是 29 而非 30</p>
<p>在多個 goroutine 裡對同一個變數total做加法運算，在賦值時無法確保其為安全的而導致運算錯誤，此問題稱為 競爭危害 (Race condition)。</p>
<br>
<p><strong>使用 Channel 來保證變數的安全性</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">total</span> <span class="o">:=</span> <span class="mi">0</span>
    <span class="nx">ch</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">chan</span> <span class="kt">int</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="nx">ch</span> <span class="o">&lt;-</span> <span class="nx">total</span>
    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="mi">1000</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
        <span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">ch</span> <span class="o">&lt;-</span> <span class="o">&lt;-</span><span class="nx">ch</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="p">}()</span>
    <span class="p">}</span>
    <span class="nx">time</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">Second</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="o">&lt;-</span><span class="nx">ch</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="err">$</span> <span class="k">go</span> <span class="nx">run</span> <span class="p">.</span>
<span class="mi">1000</span>
</code></pre></td></tr></table>
</div>
</div><p>goroutine1 拉出 total 後，Channel 中沒有資料了</p>
<p>因為 Channel 中沒有資料，因此造成 goroutine2 等待</p>
<p>goroutine1 計算完成後，將 total 推入 Channel</p>
<p>goroutine2 等到 Channel 中有資料，拉出後結束等待，繼續做運算</p>
<br>
<figure><a class="lightgallery" href="/images/go/total-channel.png" title="/images/go/total-channel.png" data-thumbnail="/images/go/total-channel.png" data-sub-html="<h2>多執行緒下的共享變數 - Channel (Go 的並發：Goroutine 與 Channel 介紹)</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/go/total-channel.png"
            data-srcset="/images/go/total-channel.png, /images/go/total-channel.png 1.5x, /images/go/total-channel.png 2x"
            data-sizes="auto"
            alt="/images/go/total-channel.png" width="500" />
    </a><figcaption class="image-caption">多執行緒下的共享變數 - Channel (<a href="https://peterhpchen.github.io/2020/03/08/goroutine-and-channel.html" target="_blank" rel="noopener noreffer">Go 的並發：Goroutine 與 Channel 介紹</a>)</figcaption>
    </figure>
<br>
<h2 id="參考資料">參考資料</h2>
<p><a href="https://go.dev/doc/tutorial/getting-started" target="_blank" rel="noopener noreffer">Go 官網</a></p>
<p><a href="https://ithelp.ithome.com.tw/users/20137500/ironman/4184" target="_blank" rel="noopener noreffer">golang後端入門分享</a></p>
<p><a href="https://myapollo.com.tw/zh-tw/golang-go-module-tutorial/" target="_blank" rel="noopener noreffer">從一知半解到略懂 Go modules</a></p>
<p><a href="https://ithelp.ithome.com.tw/articles/10186546" target="_blank" rel="noopener noreffer">30天就Go(3)：操作指令及Hello World!</a></p>
<p><a href="https://calvertyang.github.io/2019/11/05/golang-basic-types-operators-type-conversion/" target="_blank" rel="noopener noreffer">Golang 基本型別、運算子和型別轉換</a></p>
<p><a href="http://c.biancheng.net/view/18.html" target="_blank" rel="noopener noreffer">Go語言字符類型（byte和rune）</a></p>
<p><a href="https://ithelp.ithome.com.tw/users/20129671/ironman/3326" target="_blank" rel="noopener noreffer">golang初探</a></p>
<p><a href="https://peterhpchen.github.io/2020/03/08/goroutine-and-channel.html" target="_blank" rel="noopener noreffer">Go 的並發：Goroutine 與 Channel 介紹</a></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info"><div class="post-info-tag"><span><a href="/tags/go/">Go</a>
                </span><span><a href="/tags/%E5%AF%A6%E4%BD%9C/">實作</a>
                </span><span><a href="/tags/%E4%BB%8B%E7%B4%B9/">介紹</a>
                </span></div><div class="post-info-line"><div class="post-info-mod">
                <span>更新於 2022-03-29&nbsp;<a class="git-hash" href="https://github.com/880831ian/blog/commit/3bba6fffb4a51a63fcf9bd6c19c48443ca896d1f" target="_blank" title="committed&nbsp;by&nbsp;ian_zhuang(880831ian@gmail.com)&nbsp;3bba6ff:&nbsp;# 修改 Go">
                            <i class="fas fa-hashtag fa-fw"></i>3bba6ff</a></span>
            </div><div class="post-info-mod"><span>
                            <a class="link-to-markdown" href="/go/index.md" target="_blank">閱讀原始文檔</a>
                        </span><span>
                        &nbsp;|&nbsp;
                        <a class="link-to-markdown" href="https://github.com/880831ian/blog/tree/main/content/posts/go/index.zh-tw.md" target="_blank">Improve Article</a>
                    </span></div>
        </div><div class="post-info-share">
            <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://pin-yi.me/go/" data-title="Go 介紹" data-hashtags="Go,實作,介紹"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://pin-yi.me/go/" data-hashtag="Go"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Linkedin" data-sharer="linkedin" data-url="https://pin-yi.me/go/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Reddit" data-sharer="reddit" data-url="https://pin-yi.me/go/"><i class="fab fa-reddit fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://pin-yi.me/go/" data-title="Go 介紹"><i class="fab fa-line fa-fw"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://pin-yi.me/go/" data-title="Go 介紹"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Skype" data-sharer="skype" data-url="https://pin-yi.me/go/" data-title="Go 介紹"><i class="fab fa-skype fa-fw"></i></a></span>
        </div></div><div class="post-nav"><a href="/docker/" class="prev" rel="prev" title="Docker 介紹 (如何使用 Docker-compose 建置 PHP&#43;MySQl&#43;Nginx 環境)"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a>
            <a href="/go-restful-api-repository-messageboard/" class="next" rel="next" title="用 Go 寫一個 Repository Restful API 的留言板 (gin、gorm 套件)">Next Post<i class="fas fa-angle-right fa-fw"></i></a></div></div>
</div><div id="comments" class="single-card"><div id="disqus_thread"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main>
            <footer class="footer"><div class="footer-container"><div class="footer-line">此 Blog 多數程式文章都是參考網路大神，加上自己的見解與實作內容編寫而成的筆記，若有侵權，請聯繫我。</div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://pin-yi.me">PinYi</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
</div>
<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker
        .register('/sw.min.js?version=1.0.1', { scope: '/' })
        .then(() => {
            console.info('PinYi\u00A0Service Worker Registered');
        }, err => console.error('PinYi\u00A0Service Worker registration failed: ', err));

    navigator.serviceWorker
        .ready
        .then(() => {
            console.info('PinYi\u00A0Service Worker Ready');
        });
}
</script>
</footer>
        </div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到頂部">
                <i class="fas fa-chevron-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看評論">
                <i class="fas fa-comment-alt fa-fw"></i>
            </a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.1-beta.0/dist/css/lightgallery.min.css"><script src="https://pin-yi.disqus.com/embed.js" defer></script><script src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.0/dist/autocomplete.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script src="/lib/lunr/lunr.stemmer.support.min.js"></script><script src="/lib/lunr/lunr.zh.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.1-beta.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.1/sharer.min.js"></script><script>window.config={"code":{"copyTitle":"複製到剪貼板","maxShownLines":120},"comment":{},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"找不到你輸入的資料🥲","snippetLength":50,"type":"lunr"}};</script><script src="/js/theme.min.js"></script></body></html>
