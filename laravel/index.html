<!DOCTYPE html>
<html lang="zh-tw">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Laravel 介紹 (使用 Laravel 從零到有開發出一個留言板功能並搭配 RESTful API 來CRUD)  - PinYi</title><meta name="description" content="這裡是關於一個菜鳥工程師斜槓Youtuber的小天地"><meta property="og:title" content="Laravel 介紹 (使用 Laravel 從零到有開發出一個留言板功能並搭配 RESTful API 來CRUD) " />
<meta property="og:description" content="本文章會介紹什麼是 Laravel ，以及它有什麼特別之處，可以讓它在2015年被評為最受歡迎的 PHP  框架第一名，並說明為什麼要使用框架，最後實作一個留言板功能搭配 RESTful API 來CRUD。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://pin-yi.me/laravel/" /><meta property="og:image" content="https://pin-yi.me/laravel/featured-image.webp"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-02T10:33:45+08:00" />
<meta property="article:modified_time" content="2022-03-04T16:57:41+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://pin-yi.me/laravel/featured-image.webp"/>
<meta name="twitter:title" content="Laravel 介紹 (使用 Laravel 從零到有開發出一個留言板功能並搭配 RESTful API 來CRUD) "/>
<meta name="twitter:description" content="本文章會介紹什麼是 Laravel ，以及它有什麼特別之處，可以讓它在2015年被評為最受歡迎的 PHP  框架第一名，並說明為什麼要使用框架，最後實作一個留言板功能搭配 RESTful API 來CRUD。"/>
<meta name="application-name" content="PinYi">
<meta name="apple-mobile-web-app-title" content="PinYi"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/images/avatar.webp"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://pin-yi.me/laravel/" /><link rel="prev" href="https://pin-yi.me/php-restful-api/" /><link rel="next" href="https://pin-yi.me/char-varchar/" /><link rel="stylesheet" href="/css/page.min.css"><link rel="stylesheet" href="/css/home.min.css">
        <link href="https://www.googletagmanager.com" rel="preconnect" crossorigin>
        <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Laravel 介紹 (使用 Laravel 從零到有開發出一個留言板功能並搭配 RESTful API 來CRUD) ",
        "inLanguage": "zh-tw",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/pin-yi.me\/laravel\/"
        },"image": [{
                            "@type": "ImageObject",
                            "url": "https:\/\/pin-yi.me\/laravel\/featured-image.webp",
                            "width":  2070 ,
                            "height":  590 
                        }],"genre": "posts","keywords": "PHP, 框架, Laravel, 實作, 介紹","wordcount":  10369 ,
        "url": "https:\/\/pin-yi.me\/laravel\/","datePublished": "2022-03-02T10:33:45+08:00","dateModified": "2022-03-04T16:57:41+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Zhuang,Pin-Yi","logo": "https:\/\/pin-yi.me\/images\/avatar.webp"},"author": {
                "@type": "Person",
                "name": "PinYi"
            },"description": ""
    }
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-EK8X0P9SDS"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-EK8X0P9SDS', { 'anonymize_ip': false });
}
</script>
</head><body data-header-desktop="fixed" data-header-mobile="fixed"><script>(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="PinYi">PinYi 小天地</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/categories/"> 分類 </a><a class="menu-item" href="/tags/"> 標籤 </a><a class="menu-item" href="/sideproject/"> 作品集 </a><a class="menu-item" href="/categories/youtube/"> YouTube 影片 </a><a class="menu-item" href="/about/"> 關於我 </a><span class="menu-item delimiter"></span><span class="menu-item language" title="選擇語言">繁體中文<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/laravel/" selected>繁體中文</option></select>
                    </span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="請輸入要搜尋的標題或是內容" id="search-input-desktop">
                        <a href="#" class="search-button search-toggle" id="search-toggle-desktop" title="搜尋">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a class="menu-item" href="/index.xml" title="RSS"><i class="fas fa-rss fa-fw" title="RSS"></i> </a><a href="javascript:void(0);" class="menu-item theme-switch" title="切換主題">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="PinYi">PinYi 小天地</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="請輸入要搜尋的標題或是內容" id="search-input-mobile">
                        <a href="#" class="search-button search-toggle" id="search-toggle-mobile" title="搜尋">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="#" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="#" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/categories/" title="">分類</a><a class="menu-item" href="/tags/" title="">標籤</a><a class="menu-item" href="/sideproject/" title="">作品集</a><a class="menu-item" href="/categories/youtube/" title="">YouTube 影片</a><a class="menu-item" href="/about/" title="">關於我</a><div class="menu-item"><a href="/index.xml" title="RSS"><i class="fas fa-rss fa-fw" title="RSS"></i> </a>
                <span>&nbsp;|&nbsp;</span><a href="javascript:void(0);" class="theme-switch" title="切換主題">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div><span class="menu-item language" title="選擇語言">繁體中文<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/laravel/" selected>繁體中文</option></select>
                </span></div>
    </div>
</header><div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目錄</h2>
            <div class="toc-content always-active" id="toc-content-auto"></div>
        </div><article class="page single" data-toc="enable"><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/laravel/featured-image.webp"
        data-srcset="/laravel/featured-image.webp, /laravel/featured-image.webp 1.5x, /laravel/featured-image.webp 2x"
        data-sizes="auto"
        alt="/laravel/featured-image.webp"
        title="/laravel/featured-image.webp" /></div><div class="single-card" data-image="true"><h2 class="single-title animated flipInX">Laravel 介紹 (使用 Laravel 從零到有開發出一個留言板功能並搭配 RESTful API 來CRUD) </h2><div class="post-meta">
                <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>PinYi</a></span>&nbsp;<span class="post-category">出版於  <a href="/categories/codenotes/"><i class="far fa-folder fa-fw"></i>程式筆記</a></span></div>
                <div class="post-meta-line"><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-03-02">2022-03-02</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;約 10369 字</span>&nbsp;
                    <span><i class="far fa-clock fa-fw"></i>&nbsp;預計閱讀 21 分鐘</span>&nbsp;</div>
            </div>
            
            <hr><div class="details toc" id="toc-static"  data-kept="">
                    <div class="details-summary toc-title">
                        <span>目錄</span>
                        <span><i class="details-icon fas fa-angle-right"></i></span>
                    </div>
                    <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#框架是什麼">框架是什麼</a>
      <ul>
        <li><a href="#mvc">MVC</a></li>
      </ul>
    </li>
    <li><a href="#laravel-框架">Laravel 框架</a></li>
    <li><a href="#php-常見框架對比">PHP 常見框架對比</a>
      <ul>
        <li><a href="#laravel">Laravel</a></li>
        <li><a href="#symfony">Symfony</a></li>
        <li><a href="#codeigniter">CodeIgniter</a></li>
        <li><a href="#cakephp">CakePHP</a></li>
        <li><a href="#zend-2">Zend 2</a></li>
      </ul>
    </li>
    <li><a href="#實作">實作</a>
      <ul>
        <li><a href="#環境設定">環境設定</a>
          <ul>
            <li><a href="#本次介紹の版本配置">本次介紹の版本配置</a></li>
          </ul>
        </li>
        <li><a href="#新增專案">新增專案</a></li>
        <li><a href="#laravel-資料夾與檔案介紹">Laravel 資料夾與檔案介紹</a></li>
        <li><a href="#建立第一個-laravel-網頁">建立第一個 Laravel 網頁</a>
          <ul>
            <li><a href="#維護模式">維護模式</a></li>
            <li><a href="#routes-路由">Routes 路由</a>
              <ul>
                <li><a href="#webphp">web.php</a></li>
                <li><a href="#apiphp">api.php</a></li>
              </ul>
            </li>
            <li><a href="#view-blade-模板引擎">View Blade 模板引擎</a>
              <ul>
                <li><a href="#layout">Layout</a></li>
              </ul>
            </li>
            <li><a href="#controller-控制器">Controller 控制器</a></li>
            <li><a href="#database-資料庫">Database 資料庫</a>
              <ul>
                <li><a href="#migration-資料庫遷移">Migration 資料庫遷移</a></li>
                <li><a href="#建立屬於自己的-migration">建立屬於自己的 migration</a></li>
                <li><a href="#schema-結構生成器">Schema 結構生成器</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#測試">測試</a>
      <ul>
        <li><a href="#如何運行自動測試">如何運行自動測試</a></li>
        <li><a href="#實作測試程式">實作測試程式</a></li>
      </ul>
    </li>
    <li><a href="#artisan-相關指令">Artisan 相關指令</a>
      <ul>
        <li><a href="#controller">Controller</a></li>
        <li><a href="#migration">Migration</a></li>
      </ul>
    </li>
    <li><a href="#參考資料">參考資料</a></li>
  </ul>
</nav></div>
                </div><div class="content" id="content"><p>本文章會介紹什麼是 Laravel ，以及它有什麼特別之處，可以讓它在2015年被評為最受歡迎的 PHP  框架第一名，並說明為什麼要使用框架，最後實作一個留言板功能搭配 RESTful API 來CRUD。</p>
<p>就像是 Laravel 官網的大標題，『 The PHP Framework for Web Artisans 為網頁藝術家創造的 PHP 框架 』，那再了解 Laravel 之前，先來介紹一下框架是什麼：</p>
<h2 id="框架是什麼">框架是什麼</h2>
<ul>
<li>框架 (Framework) 是一個被設計用來完成特定任務的規範，程式開發人員必須遵從這個規則來開發。</li>
<li>目前大多數的框架都是參考 MVC 架構的概念來做設計，原因是在早期開發網頁時，都是直接將 HTML 以及 PHP 混合再一起的方式來編寫，雖然開發上很方便，但在後面維護或是新增功能上，會十分不便利，例如：單純要修改網站畫面的元件時，還需要從混雜的程式碼中找到要修改的元件，也很容易不小心修改到其他的功能。</li>
</ul>
<h3 id="mvc">MVC</h3>
<ul>
<li>於是有人想到把這些各自的任務區分開來，MVC 架構分別代表的是
<ul>
<li>M (Model) : 屬於資料的部分，可能是商用邏輯或是資料庫的存取。</li>
<li>V (View)：屬於顯示的部分，像是 HTML、CSS 等</li>
<li>C (Controllor)：會針對請求做出回應或是處理，例如從 Model 取出資料，並顯示在 View 上面</li>
</ul>
</li>
</ul>
<br>
<figure><a class="lightgallery" href="/images/laravel/mvc.png" title="/images/laravel/mvc.png" data-thumbnail="/images/laravel/mvc.png" data-sub-html="<h2>MVC 架構 一起走向MVC(上)</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/laravel/mvc.png"
            data-srcset="/images/laravel/mvc.png, /images/laravel/mvc.png 1.5x, /images/laravel/mvc.png 2x"
            data-sizes="auto"
            alt="/images/laravel/mvc.png" width="700" />
    </a><figcaption class="image-caption">MVC 架構 <a href="https://bak.infolight.com/new/ShareDetail.aspx?DocumentID=NDUz" target="_blank" rel="noopener noreffer">一起走向MVC(上)</a></figcaption>
    </figure>
<br>
<h2 id="laravel-框架">Laravel 框架</h2>
<p>Laravel 是基於上面所說的 MVC 架構打造的框架，並且設計出許多可以讓開發者更有效率的工具。</p>
<ul>
<li>Artisan：提供許多指令，讓你可以使用這些指令，來快速完成許多的任務。</li>
<li>Routing 路由：管理網址與頁面的路徑指定，辨識傳入的 request 傳送至對應的 Controller，回傳指定的 View。</li>
<li>Blade 模板引擎 (View)：模板解析工具， 是 Laravel 所指用的模板引擎，Blade 會將 PHP 以及 HTML 完整分離的工具。</li>
<li>Auth 認證：透過 Laravel 預設提供的認證 Controller 快速解決經常用到的驗證需求，像是：使用者註冊、使用者認證、重置密碼的 e-mail 連結、重置密碼邏輯等。</li>
<li>Eloquent ORM 物件關聯對映 (Model)：Laravel 預設的ORM，將資料庫的欄位映射成物件 (Ｍodel 模型)，只需要用 PHP 的語法，不需要撰寫 SQL 指令就可以用物件的方式讀取欄位資訊以及與資料庫的互動。</li>
<li>Migration 資料庫遷移：聽起來很像是更換資料庫，但他其實算是一種資料庫的版本控制，可以讓團隊在修改資料庫結構的同時，保持彼此的進度ㄧ致，通常會結合結構生成器一起使用，可以簡單管理資料庫結構。</li>
</ul>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>小知識<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>ORM：英文叫 Object Relational Mapping，翻譯成中文為物件關聯對映。在網站開發結構中，是在資料庫和Model 資料容器兩者之間，簡單來說，它是可以讓開發者更簡單、安全的方式從資料庫讀取資料，因為 ORM 的特性是可以透過物件導向程式語言去操作資料庫。</p>
<ul>
<li>優點
<ol>
<li>安全性：可以避免 SQL injection，遇到奇怪的值，會自動擋掉。</li>
<li>簡化性：可以將原本 SQL <code>Select * From users</code> 等指令給簡化。</li>
<li>通用性：因為 ORM 是程式語言和資料庫之間的關係，就算有要轉換資料庫，也比較不會遇到要修改程式的狀況。</li>
</ol>
</li>
<li>缺點
<ol>
<li>效能：為了要達成方便性，通常都會犧牲到效能的問題，因為等於多了『把程式語言轉譯成SQL語言』這項工作。</li>
<li>學習曲線高：對於初學者來說，ORM 需要融合 SQL 語言以及程式語言兩種不同的概念以及語法，會比單純學 SQL 語法還較複雜。</li>
<li>複雜查詢維護性低：有些 SQL 語法 ORM 沒有支援，所以導致有些情況還是需要導入原生 SQL 寫法。</li>
</ol>
</li>
</ul>
<p>(資料來源：<a href="https://ithelp.ithome.com.tw/articles/10207752" target="_blank" rel="noopener noreffer">資料庫設計概念 - ORM</a>)</p>
</div>
        </div>
    </div>
<h2 id="php-常見框架對比">PHP 常見框架對比</h2>
<p>雖然本次介紹的主題是 Laravel 但我們也簡單介紹一下其他的框架優點，以及附上表格讓大家可以更清楚。</p>
<table>
<thead>
<tr>
<th>差別</th>
<th style="text-align:center">Laravel</th>
<th style="text-align:center">Symfony</th>
<th style="text-align:center">CodeIgniter</th>
<th style="text-align:center">CakePHP</th>
<th style="text-align:center">Zend 2</th>
</tr>
</thead>
<tbody>
<tr>
<td>許可 License</td>
<td style="text-align:center">MIT</td>
<td style="text-align:center">MIT</td>
<td style="text-align:center">BSD</td>
<td style="text-align:center">BSD</td>
<td style="text-align:center">MIT</td>
</tr>
<tr>
<td>人氣排名 Popularity<br>(2022-03 Google 搜尋熱門程度)</td>
<td style="text-align:center">第一名</td>
<td style="text-align:center">第二名</td>
<td style="text-align:center">第三名</td>
<td style="text-align:center">第四名</td>
<td style="text-align:center">第五名</td>
</tr>
<tr>
<td>表現</td>
<td style="text-align:center">慢</td>
<td style="text-align:center">慢</td>
<td style="text-align:center">快</td>
<td style="text-align:center">慢</td>
<td style="text-align:center">慢</td>
</tr>
<tr>
<td>模板</td>
<td style="text-align:center">Blade</td>
<td style="text-align:center">Twig</td>
<td style="text-align:center">PHP</td>
<td style="text-align:center">內建</td>
<td style="text-align:center">PHP</td>
</tr>
<tr>
<td>資料庫</td>
<td style="text-align:center">MySQL <br> PostgreSQL <br> SQLite <br> SQL Server</td>
<td style="text-align:center">MySQL <br> PostgreSQL <br> SQLite <br> SQL Server <br> Oracle</td>
<td style="text-align:center">MySQL <br> PostgreSQL <br> SQLite <br> SQL Server <br> Oracle</td>
<td style="text-align:center">MySQL <br> PostgreSQL <br> SQLite <br> SQL Server <br> Oracle</td>
<td style="text-align:center">MySQL <br> PostgreSQL <br> SQLite <br> SQL Server <br> Oracle</td>
</tr>
<tr>
<td>物件關係對映</td>
<td style="text-align:center">有</td>
<td style="text-align:center">Doctrine</td>
<td style="text-align:center">沒有內建</td>
<td style="text-align:center">有</td>
<td style="text-align:center">Doctrine</td>
</tr>
<tr>
<td>測試</td>
<td style="text-align:center">PHPUnit</td>
<td style="text-align:center">PHPUnit</td>
<td style="text-align:center">內建</td>
<td style="text-align:center">PHPUnit</td>
<td style="text-align:center">PHPUnit</td>
</tr>
</tbody>
</table>
<h3 id="laravel">Laravel</h3>
<p>該框架可能是Web 開發人員中最受歡迎的框架。Laravel 是一個免費的開源PHP 框架，適用於Web 應用程序開發，且適用於移動應用程序場。(上面有介紹過，這邊就簡化)</p>
<p><strong>Laravel 框架優點</strong></p>
<ul>
<li>易於學習</li>
<li>無縫數據遷移</li>
<li>在 PHP 社群中很受歡迎</li>
<li>支持 MVC 架構</li>
<li>大量學習素材 (文件、圖檔、影片教程)</li>
<li>模板引擎</li>
<li>簡單的單元測試</li>
</ul>
<h3 id="symfony">Symfony</h3>
<p>該框架是一個廣泛的PHP MVC 框架，目前Symfony 已經成為一個可靠和成熟的平台框架。</p>
<p>Symfony 非常穩定、文檔齊全、性能卓越。這些特點使Symfony 成為開發大型企業項目的完美選擇。</p>
<p>使 Symfony 成為 PHP 框架中獨一無二的特性之一是它的可重用 PHP 組件。使用可重用組件，開發時間減少了許多模塊，如表單創建、對象配置、模板等。</p>
<p>可以直接從舊組件構建，節約了大量成本。Symfony 易於在大多數平台上安裝和配置，並且可以獨立於數據庫引擎。它具有高度的靈活性，可以與 Drupal 等大型項目集成</p>
<p><strong>Symfony 框架優點</strong></p>
<ul>
<li>官方長期技術支持</li>
<li>內置測試功能</li>
<li>豐富的框架內置功能</li>
<li>官方培訓課程和認證</li>
</ul>
<h3 id="codeigniter">CodeIgniter</h3>
<p>該框架可能是最適合開發動態網站的PHP 框架。它是一個非常簡單的輕量級PHP 框架。</p>
<p>它的大小只有2 MB 左右（包括文檔）。因此，CodeIgniter 本身俱有最小的佔用空間，它允許Web 開發人員添加第三方插件來開發更複雜的功能。</p>
<p>CodeIgniter 還提供了幾個預構建的模塊，用於為Web 開發創建健壯的、可重用的組件。由於設置過程簡單，這個PHP 框架非常適合初學者。</p>
<p><strong>CodeIgniter 框架優點</strong></p>
<ul>
<li>MVC 架構</li>
<li>Top-Notch 錯誤處理</li>
<li>提供卓越的性能</li>
<li>包中提供了幾種工具</li>
<li>內置安全工具</li>
<li>優秀的文檔</li>
</ul>
<h3 id="cakephp">CakePHP</h3>
<p>該框架對個人是完全免費，並提供付費的商業用途。它將幫助您開發功能豐富且視覺上令人印象深刻的網站。</p>
<p>CakePHP 起初是一個簡單而優雅的工具包，在過去的15 年裡它變得更加強大。由於它的CRUD（創建、讀取、更新和刪除）框架，CakePHP 是最容易學習的框架。</p>
<p>使用CakePHP 部署Web 網站是&quot;小菜一碟&quot;，只需要一個Web 服務器和CakePHP 框架的副本。</p>
<p><strong>CakePHP 框架優點</strong></p>
<ul>
<li>插件和組件的簡易擴展</li>
<li>適當的類繼承</li>
<li>零配置</li>
<li>現代框架</li>
<li>支持AJAX</li>
<li>快速構建</li>
<li>內置驗證</li>
</ul>
<h3 id="zend-2">Zend 2</h3>
<p>該框架是一個完整的面向對象的PHP 框架。這個PHP 框架是可定制的，對於需要添加項目特定功能的開發人員來說，這是一個好處。</p>
<p>Zend 構建於敏捷方法之上，可幫助開發人員為大型客戶創建、高質量的Web 應用程序的框架。它非常適合複雜的企業級項目，Zend 主要關注安全性、性能和可擴展性。</p>
<p>Zend 框架主要受大型IT 企業和銀行等金融機構的青睞。</p>
<p><strong>Zend 2 框架優點</strong></p>
<ul>
<li>MVC 組件</li>
<li>卓越的前端技術支持工具</li>
<li>大型開發者社區</li>
<li>簡單的雲API</li>
<li>支持第三方組件</li>
<li>數據加密</li>
<li>支持AJAX</li>
<li>會話管理</li>
</ul>
<h2 id="實作">實作</h2>
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>Laravel 官網<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">我是參考 <a href="https://laravel.com" target="_blank" rel="noopener noreffer">Laravel 官方網站</a> 的文件來進行實作，也可以參考台灣的  <a href="https://laravel.tw/" target="_blank" rel="noopener noreffer"> Laravel.tw</a> 來操作歐！</div>
        </div>
    </div>
<h3 id="環境設定">環境設定</h3>
<p>要安裝 Laravel 框架有一些系統的要求，要先安裝 PHP ，請參考<a href="https://www.php.net/manual/zh/install.php" target="_blank" rel="noopener noreffer"> PHP 官網的安裝教學</a></p>
<p>安裝完後可以使用來檢查是否安裝成功</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ php --version                                                                                                                                      
PHP 7.1.33 <span class="o">(</span>cli<span class="o">)</span> <span class="o">(</span>built: Jan <span class="m">20</span> <span class="m">2022</span> 04:04:37<span class="o">)</span> <span class="o">(</span> NTS <span class="o">)</span>
Copyright <span class="o">(</span>c<span class="o">)</span> 1997-2018 The PHP Group
</code></pre></td></tr></table>
</div>
</div><br>
<p>再安裝 Composer ，請參考 <a href="https://getcomposer.org/download/" target="_blank" rel="noopener noreffer"> Composer 官網的安裝教學</a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ composer --version                                                                                                                           
Composer version 2.2.7
</code></pre></td></tr></table>
</div>
</div><br>
都安裝好後，我們就要來安裝 Laravel 框架囉，根據 Laravel 官網安裝步驟，先用 Composer 來安裝
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ composer global require <span class="s2">&#34;laravel/installer&#34;</span>
</code></pre></td></tr></table>
</div>
</div><br>
安裝後一樣先來檢查是否安裝成功
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ laravel --version                                                                                                                                 
zsh: <span class="nb">command</span> not found: laravel
</code></pre></td></tr></table>
</div>
</div><br>
<p>發現 zsh 找不到 laravel 這個命令，那我們看一下官網怎麼說</p>
<p><code>Make sure to place the $HOME/.composer/vendor/bin directory (or the equivalent directory for your OS) in your $PATH so the laravel executable can be located by your system.</code></p>
<br>
代表我們要將 Laravel 的目錄，放到 $PATH ，系統才可以使用 laravel 來執行檔案。
<p>以 macOS 來說， Laravel installer 的目錄都會放在 <code>$HOME/.composer/vendor/bin</code> ，我們在根目錄建立一個 .bash_profile 的檔案來放置我們的 $PATH。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&#34;</span><span class="nv">$HOME</span><span class="s2">/.composer/vendor/bin:</span><span class="nv">$PATH</span><span class="s2">&#34;</span>
</code></pre></td></tr></table>
</div>
</div><br>
輸入上面的 PATH ，記得儲存離開後要用這個指令來更新一下檔案
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ <span class="nb">source</span> .bash_profile
</code></pre></td></tr></table>
</div>
</div><br>
<p>我們再次檢查是否安裝好 Laravel</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ laravel --version                                                                                                                                 
Laravel Installer 2.3.0
</code></pre></td></tr></table>
</div>
</div><br>
<p>因為我們後續會使用到資料庫的功能，所以也可以先把他安裝好 <a href="https://formulae.brew.sh/formula/mysql" target="_blank" rel="noopener noreffer">ＭySQL </a></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ mysql -V                                                                                                        
mysql  Ver 8.0.28 <span class="k">for</span> macos11.6 on x86_64 <span class="o">(</span>Homebrew<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><br>
<h4 id="本次介紹の版本配置">本次介紹の版本配置</h4>
<ul>
<li>macOS 11.6</li>
<li>PHP 7.1.33</li>
<li>MySQL 8.0.28</li>
<li>Composer 2.2.7</li>
<li>Laravel Installer 2.3.0</li>
</ul>
<h3 id="新增專案">新增專案</h3>
<p>安裝成功後，就可以開始來使用 Laravel 框架生成檔案囉！要怎麼做呢？就接著看下去吧</p>
<p>可以使用 Laravel 來新增專案</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ laravel new 專案名稱
</code></pre></td></tr></table>
</div>
</div><br>
<p>也可以透過 composer 指令 (可以指定框架版本，那我們這次使用的是5.4版本)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ composer create-project --prefer-dist laravel/laravel 專案名稱 <span class="s2">&#34;5.4.*&#34;</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>完成後就進入該專案目錄底下，接著可以執行該指令來檢查框架版本</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ php artisan -V
Laravel Framework 5.4.36
</code></pre></td></tr></table>
</div>
</div><br>
<div class="details admonition tap open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>小提醒<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">Laravel 框架的版本，取決於你的 PHP 版本，所以要找相對應的歐！，使用 Laravel 5.4 跟 PHP 8.1 ，他會說PHP 版本太新，無法安裝。</div>
        </div>
    </div>
<h3 id="laravel-資料夾與檔案介紹">Laravel 資料夾與檔案介紹</h3>
<p>我們可以看到這個專案目錄下，Laravel 幫我們生成了許多資料夾以及檔案，接著來簡單說明每一個資料夾與檔案的功能與用途吧</p>
<ul>
<li>app：主要放置 controller 的地方，提供網站的應用處理流程，包括處理用戶的行為和資料 Model 上的改變等事件之類別方法，提供給 view 來呼叫。透過 laravel 之架構也可透過 controller 輕易建構 RESTful API。</li>
<li>boostrap：內含之 app.php 為將此框架初始化及建構起來之程式。</li>
<li>config：內含此專案網站之環境設定、資料庫設定等設定程式。</li>
<li>database：放置資料庫設定 (Model)。</li>
<li>public：放置網站入口，透過 index.php 導入從 route 設定之首頁</li>
<li>resources：放置 view 的資源，用以呈現網站頁面</li>
<li>routes：放置所有專案 route 的設定，其中較常用之 web.php 做為主要頁面導向及與 controller 的溝通，而 api.php 則作為專案提供 api 的設定。</li>
<li>storage：主要放置些程式生成的檔案如頁面樣板 (Blade templates)、系統記錄 (logs)、file caches、file based sessions 等資料。</li>
<li>tests：放置測試用例 (Test Case)。</li>
<li>vendor：放置透過 composer 下載管理的套件。</li>
<li>artisan：可於專案中透過 &ldquo;php artisan&rdquo; 執行 laravel 設計好的基本操作行為，如建立 controller 等動作。</li>
<li>composer.json：管理專案使用套件，詳細用法見 composer 官方說明。</li>
<li>composer.lock：鎖定專案使用套件版號。</li>
<li>package.json：管理 npm 套件，主要提供給前端使用。</li>
<li>phpunit.xml：phpunit 測試設定檔，可規範執行單元測試之範圍，做批量測試。</li>
<li>webpack.mix.js：build 設定檔，幫助我們將 resources 中之 js 及 sass 等前端設定檔 compile 成 js、css 等檔案並 deploy 到 public 中供頁面使用。</li>
</ul>
<h3 id="建立第一個-laravel-網頁">建立第一個 Laravel 網頁</h3>
<div class="details admonition quote open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-quote-right fa-fw"></i>文章參考來源<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">下面教學流程是參考ReccaChao <a href="https://ithelp.ithome.com.tw/articles/10213294" target="_blank" rel="noopener noreffer"> Laravel 6.0 初體驗！怎麼用最新的 laravel 架網站！</a> 的文章下去說明以及學習，在學習過程中再加上自己的理解以及不同範例的筆記來分享給大家，大家也可以先去瀏覽大大的文章，再回來呦XD</div>
        </div>
    </div>
<p>我們經過千辛萬苦，將 Laravel 給安裝好，也設定好它所需的環境參數，打開 IED 準備開始學習如何建立第一個 Laravel 網頁吧！</p>
<p>在開始說明前，還要先下一個指令，在介紹 Laravel 專案下的資料夾以及檔案中，其中一個 &ldquo;Artisan&rdquo;，是 Laravel 專用的指令工具，可以幫我們處理很多事情。</p>
<p>像是我們現在要啟動內建的伺服器來瀏覽我們的網站，這時我們要下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ poser global requirephp artisan serve
Laravel development server started: &lt;http://127.0.0.1:8000&gt;
<span class="o">[</span>Thu Mar  <span class="m">3</span> 15:13:07 2022<span class="o">]</span> 127.0.0.1:52345 <span class="o">[</span>200<span class="o">]</span>: /favicon.ico
</code></pre></td></tr></table>
</div>
</div><br>
這個伺服器會在這個終端機下被建立，屬於這個專案的伺服器，如果想要關閉，可以使用 Ctrl + C 來關閉。
<div class="details admonition tap open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>小提醒<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">由於此伺服器是專屬於該專案的伺服器，所以下指令時，也要在該專案的目錄下歐！</div>
        </div>
    </div>
<p>如果想要使用特定的 Port ，可以在後面加入此參數，就可以依照設定的 Port 來當作我們伺服器的位子囉！(預設是8000 Port)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ php artisan serve --port<span class="o">=</span><span class="m">7777</span>
Laravel development server started: &lt;http://127.0.0.1:7777&gt;
<span class="o">[</span>Thu Mar  <span class="m">3</span> 15:45:23 2022<span class="o">]</span> 127.0.0.1:54206 <span class="o">[</span>200<span class="o">]</span>: /favicon.ico
</code></pre></td></tr></table>
</div>
</div><br>
<h4 id="維護模式">維護模式</h4>
<p>當我們想要修改系統或是資料庫的欄位時，就可以將該網站設定成維修模式。Laravel 讓這個工作變得很容易，只需要用以下兩個指令來控制</p>
<p>啟動維護模式</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ php artisan down --message<span class="o">=</span><span class="s2">&#34;Upgrading Database&#34;</span> --retry<span class="o">=</span><span class="m">60</span>
</code></pre></td></tr></table>
</div>
</div><br>
還可以設定一些參數， --message 是用來顯示或紀錄客製化訊息， --retry 用來當作HTTP head 的 Retry-After 的值
<br>
<figure><a class="lightgallery" href="/images/laravel/error503.png" title="/images/laravel/error503.png" data-thumbnail="/images/laravel/error503.png" data-sub-html="<h2>Laravel 維護模式顯示頁面</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/laravel/error503.png"
            data-srcset="/images/laravel/error503.png, /images/laravel/error503.png 1.5x, /images/laravel/error503.png 2x"
            data-sizes="auto"
            alt="/images/laravel/error503.png" width="700" />
    </a><figcaption class="image-caption">Laravel 維護模式顯示頁面</figcaption>
    </figure>
<br>
關閉維護模式
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ php artisan up
</code></pre></td></tr></table>
</div>
</div><p><div class="details admonition abstract open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ul fa-fw"></i>維護模式顯示模板<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">維護模式顯示的預設模板放置在 resources/views/errors/503.blade.php。你可以自由的根據需求修改。</div>
        </div>
    </div>
<br></p>
<h4 id="routes-路由">Routes 路由</h4>
<p>我們要來建立我的第一個網頁，網頁的其中一個關鍵就是路徑，那我們網站的路徑，在 Laravel 裡面，都放置在 routes/ 裡面，打開後可以看到4個檔案有</p>
<ul>
<li>api.php：我們在做前後端分離的專案時會使用這個檔案。</li>
<li>channels.php：和 Broadcast 有關係，這個是 Laravel ，不太常使用，所以先跳過，之後有碰到再來說明。</li>
<li>console.php：這個和我們指令有關，像是我們上面介紹的 php artisan ，這個檔案就是和這個部分有關。</li>
<li>web.php：這個和我們現在要說明的路徑有關，我們在瀏覽器打的網址，前面是 domain name，那在 domain 之後的字串，會在我們這個檔案裡面來定義哪些字串要導向哪一個流程或是檔案。</li>
</ul>
<h5 id="webphp">web.php</h5>
<p>那我們就先來針對 web.php 來做介紹，我們剛剛使用指令開啟的伺服器網址是 <code>http://127.0.0.1:8000</code>，使用瀏覽器進入後，可以看到下面這個 Laravel 預設的頁面(此為 Laravel 5.4版本，新版的好像不太一樣)</p>
<figure><a class="lightgallery" href="/images/laravel/laravel_welcome.png" title="/images/laravel/laravel_welcome.png" data-thumbnail="/images/laravel/laravel_welcome.png" data-sub-html="<h2>Laravel 預設首頁</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/laravel/laravel_welcome.png"
            data-srcset="/images/laravel/laravel_welcome.png, /images/laravel/laravel_welcome.png 1.5x, /images/laravel/laravel_welcome.png 2x"
            data-sizes="auto"
            alt="/images/laravel/laravel_welcome.png" width="700" />
    </a><figcaption class="image-caption">Laravel 預設首頁</figcaption>
    </figure>
<p>那我們開啟 routes/web.php 檔案中，可以看到下面這一段預設的路由</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;welcome&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>這段的意思就是代表，如果我們網址沒有輸入其他的目錄，就會顯示 welcome 這個網頁，那 welcome 這個顯示的畫面，就放在 <code>resources/view</code> 底下名為 welcome.blade.php 的檔案中，打開來看就是簡單的 HTML。</p>
<p>那現在我們了解路由的含義，現在換我們來實作一個看看，首先我們希望網址列輸入 <code>https://127.0.0.1:8000/hello-world</code> 可以出現 <code>hello world</code> 的字樣，那我們可以到 web.php 中，新增下面這個路由</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/hello-world&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;hello-world&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>再到到 <code>resources/view</code> 新增 hello-world.blade.php 檔案，簡單輸入 HTML 格式，如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;X-UA-Compatible&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;IE=edge&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;width=device-width, initial-scale=1.0&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Document<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span> hello ~ pinyi <span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>使用瀏覽器在網址列輸入 <code>http://127.0.0.1/hello-world</code> ，就可以看到顯示 <code>hello ~ pinyi </code> 的字樣囉～</p>
<p>除了回傳網頁來做顯示以外，也可以單獨回傳字串，並帶入參數歐，我們來試試看要怎麼做。首先我們先將路由修改成下方，讓我們在 hello-world 後面可以輸入我們的名稱，並且顯示在畫面上</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/hello-world/{name}&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;hello ~ &#39;</span> <span class="o">.</span> <span class="nv">$name</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>我們在網址列輸入 <code>http://127.0.0.1/hello-world/pinyi</code> 就會顯示 <code>hello ~ pinyi</code> ，很神奇吧，只要在括號中 {} 輸入你要的參數，並且後面的 function 也要帶入參數，就可以將資料給帶進去了 !</p>
<h5 id="apiphp">api.php</h5>
<p>我們可以看到 api.php 檔案也是使用 Route 來運作，如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">Route</span><span class="o">::</span><span class="na">middleware</span><span class="p">(</span><span class="s1">&#39;auth:api&#39;</span><span class="p">)</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/user&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Request</span> <span class="nv">$request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="na">user</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p>middleware 就是一種過濾或是防火牆的概念，這個我們後續會再說明。我們也在此新增一個跟上面一樣的 hello-world，如下</p>
<br>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/hello-world&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;Hello World ~&#39;</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><p>在 api.php 比較特別的部分是需要在字串前面加入 api ，因為 api.php 就是預設讓我們來放 api 的地方，如範例 url:{domain}/api/hello-world，那就會回傳 <code>hello world ~</code></p>
<br>
<h4 id="view-blade-模板引擎">View Blade 模板引擎</h4>
<p>我們已經知道要怎麼透過路由，讓使用者輸入網址後，根據網址指向想要呈現的畫面，那我們的畫面要怎麼呈現呢 !?</p>
<p>上面有使用簡單的 HTML 來做說明，那本章節就來介紹怎麼修改我們的前端輸出吧。</p>
<h5 id="layout">Layout</h5>
<p>我們在設計網頁時，通常都會使用外觀樣板，讓網頁相同的地方只做一次就可以顯示，不需要每一個頁面都重複寫相同的程式碼，只需要在想要顯示的地方來顯示各自的內容就好</p>
<p>如果聽不太懂，我以我的 Blog 來舉例，紅色框框部分，在每一頁都會顯示，我們可以把他寫成一個檔案，就不需要重複再寫一次，藍色框框部分，會依照每一頁的內容來做顯示。</p>
<br>
<figure><a class="lightgallery" href="/images/laravel/layout.png" title="/images/laravel/layout.png" data-thumbnail="/images/laravel/layout.png" data-sub-html="<h2>PinYi 小天地</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/laravel/layout.png"
            data-srcset="/images/laravel/layout.png, /images/laravel/layout.png 1.5x, /images/laravel/layout.png 2x"
            data-sizes="auto"
            alt="/images/laravel/layout.png" width="700" />
    </a><figcaption class="image-caption">PinYi 小天地</figcaption>
    </figure>
<br>
<p>那我們可以透過 Laravel 的 Blade Engine 輕鬆地達到這件事情，首先，到 <code>resources/views/</code> 目錄下建立一個叫 <code>layouts</code> 的資料夾。這個資料夾之後會讓我們來放不同的模板</p>
<br>
<p>在 <code>layouts</code> 下建立一個 <code>header.blade.php</code> 檔案，內容如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">&#34;X-UA-Compatible&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;IE=edge&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;width=device-width, initial-scale=1.0&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Document<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>測試網站，我是標題<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>

        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;container&#34;</span><span class="p">&gt;</span>
            @yield(&#39;content&#39;)
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>可以看到我們把 &ldquo;測試網站，我是標題&rdquo;，當作 header，然後在 container 裡面使用了 <code>@yield()</code> 的語法，這個語法代表我們可以在其他的網頁 call 這個 header 來做顯示，則 container 就會依照該網頁想要呈現的內容來做顯示，我們再繼續看下去</p>
<br>
<p>我們在 <code>resources/views/</code> 下，新增一個 <code>test.blade.php</code> 的檔案，內容如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">@</span><span class="k">extends</span><span class="p">(</span><span class="s1">&#39;layouts.header&#39;</span><span class="p">)</span>

<span class="o">@</span><span class="nx">section</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">今天天氣很好歐！</span><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
<span class="o">@</span><span class="nx">endsection</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>這邊簡單說明一下這個檔案裡面的意思，</p>
<p><code>@extends('layouts.header')</code>  是指繼承 <code>layouts</code> 這個資料夾底下的 <code>header.blade.php</code> 檔案內容，</p>
<p><code>@section('content')</code> 是指我們剛剛在 <code>header.blade.php</code> 檔案裡面所下的 <code>@yield(content)</code> 的內容。</p>
<br>
<p>我們再到 <code>route/web.php</code> 來設定路由，加入這一段程式碼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php">
<span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/test&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>我們在去瀏覽 <code>http://127.0.0.1:8000/test</code> ，就可以看到成品囉！這代表我們成功將 <code>layouts/header.blade.php</code> 的模板放到 <code>test.blade.php</code> 裡面囉。</p>
<br>
<figure><a class="lightgallery" href="/images/laravel/layout_show.png" title="/images/laravel/layout_show.png" data-thumbnail="/images/laravel/layout_show.png" data-sub-html="<h2>PinYi 小天地</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/laravel/layout_show.png"
            data-srcset="/images/laravel/layout_show.png, /images/laravel/layout_show.png 1.5x, /images/laravel/layout_show.png 2x"
            data-sizes="auto"
            alt="/images/laravel/layout_show.png" width="500" />
    </a><figcaption class="image-caption">PinYi 小天地</figcaption>
    </figure>
<br>
<p>當然，我們也可以透過 route 將後端的資料傳到前端，我們先到 <code>routes/web.php</code> 底下修改成</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/test/{name}&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">view</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">]);</span>
<span class="p">});</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>再到， <code>resources/views/test.blade.php</code> 修改成以下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">@</span><span class="k">extends</span><span class="p">(</span><span class="s1">&#39;layouts.header&#39;</span><span class="p">)</span>

<span class="o">@</span><span class="nx">section</span><span class="p">(</span><span class="s1">&#39;content&#39;</span><span class="p">)</span>
    <span class="o">&lt;</span><span class="nx">p</span><span class="o">&gt;</span><span class="nx">今天天氣很好歐！</span> <span class="p">{{</span><span class="nv">$name</span><span class="p">}}</span><span class="o">&lt;/</span><span class="nx">p</span><span class="o">&gt;</span>
<span class="o">@</span><span class="nx">endsection</span>
</code></pre></td></tr></table>
</div>
</div><br> 
<p>就可以看到我們可以輸入 <code>http://127.0.0.1:8000/test/pinyi</code> ，網頁前端就會顯示</p>
<br>
<figure><a class="lightgallery" href="/images/laravel/layout_show_2.png" title="/images/laravel/layout_show_2.png" data-thumbnail="/images/laravel/layout_show_2.png" data-sub-html="<h2>PinYi 小天地</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/laravel/layout_show_2.png"
            data-srcset="/images/laravel/layout_show_2.png, /images/laravel/layout_show_2.png 1.5x, /images/laravel/layout_show_2.png 2x"
            data-sizes="auto"
            alt="/images/laravel/layout_show_2.png" width="500" />
    </a><figcaption class="image-caption">PinYi 小天地</figcaption>
    </figure>
<br>
<p>我們就成功將後端的資料送至前端！ 要注意 <code>resources/views/test.blade.php</code> 底下需要用兩個 {{}} 來括住參數呦，只有一個 {} 他會當成一般的字串來顯示呦～</p>
<br>
<h4 id="controller-控制器">Controller 控制器</h4>
<p>除了剛剛在 <code>routes</code> 檔案中定義所有請求以及處理外，也可以使用 Controller 來處理邏輯的請求，我們來看一下實際案例吧 !</p>
<br>
<p>題目：我們有一個冷知識產生器，依照我們輸入的 id 不同，會顯示不同的冷知識，那我們要怎麼做呢 !?</p>
<p>首先我們先到 <code>routes</code> 設定好我們的路由 <code>http://127.0.0.1/trivia/(輸入的id)</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="nx">Route</span><span class="o">::</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/trivia/{id}&#39;</span><span class="p">,</span> <span class="s1">&#39;TriviaController@trivia&#39;</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>前面是我們的路由，後面則是我們要對應的 Controller 位置</p>
<br>
<p>接下來使用 <code>artisan</code> 指令來建立這個 Controller</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ php artisan make:controller TriviaController
Controller created successfully.
</code></pre></td></tr></table>
</div>
</div><br>
<p>Laravel 會自動產生一個 <code>TriviaController.php</code> 的檔案，位置在 <code>app/Http/Controllers</code> 底下</p>
<br>
<figure><a class="lightgallery" href="/images/laravel/controller.png" title="/images/laravel/controller.png" data-thumbnail="/images/laravel/controller.png" data-sub-html="<h2>Controller 產生檔案位置</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/laravel/controller.png"
            data-srcset="/images/laravel/controller.png, /images/laravel/controller.png 1.5x, /images/laravel/controller.png 2x"
            data-sizes="auto"
            alt="/images/laravel/controller.png" width="300" />
    </a><figcaption class="image-caption">Controller 產生檔案位置</figcaption>
    </figure>
<br>
<p>接著我們來修改 <code>TriviaController.php</code> ，加入我們在 <code>routes</code> 宣告的函式 <code>trivia</code>，並把剛剛在 <code>routes</code> 所帶的參數 <code>id</code> 給帶入</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">TriviaController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">trivia</span><span class="p">(</span><span class="nv">$id</span><span class="p">){</span>
        <span class="k">return</span> <span class="nv">$id</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>使用瀏覽器輸入 <code>http://127.0.0.1/trivia/{任意數字}</code> 來檢查是否有將 <code>routes</code> 跟 <code>controller</code> 串再一起。</p>
<p>正常的話，會看到畫面顯示你所輸入的 {任意數字} (當然因為沒有限制輸入，所以輸入任何字元都可以 XD)</p>
<br>
<p>接下來，依照我們的題目，我們輸入不同的 <code>id</code> ，要顯示不同的冷知識，那我們要在哪去處理這個邏輯呢 !?</p>
<p>這個問題，網路上大家看法都不一樣，我針對我學習的以及 ReccaChao <a href="https://ithelp.ithome.com.tw/articles/10213294" target="_blank" rel="noopener noreffer">Laravel 6.0 初體驗！怎麼用最新的 laravel 架網站！</a> 的看法，將邏輯都寫在 <code>Services</code> 裡面在由 <code>controller</code> 來做控制，這樣可以把每一個元件的職責都拆分出來。</p>
<br>
<p>那我們就要先在 <code>app</code> 底下建立一個 <code>Services</code> 的資料夾，來存放我們的服務。再建立一個這次題目的邏輯存放的位置 <code>TriviaService.php</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Services</span><span class="p">;</span>

<span class="sd">/**
</span><span class="sd"> * Class TriviaService
</span><span class="sd"> */</span>
<span class="k">class</span> <span class="nc">TriviaService</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * @return string
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">trivia</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$arr</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;李小龍的動作非常快，快到看不清，所以拍電影時只好放慢膠片的速度。&#39;</span><span class="p">,</span>
            <span class="s1">&#39;流沙一般都不深，根本不像電影里的那樣，所以不用擔心，除非使面部被流沙掩埋，不然根本不會有事。&#39;</span><span class="p">,</span>
            <span class="s1">&#39;最早被打上條形碼的產品是箭牌口香糖。&#39;</span><span class="p">,</span>
            <span class="s1">&#39;在菲律賓溜溜球曾被作為武器。&#39;</span><span class="p">,</span>
            <span class="s1">&#39;打噴嚏時無法睜着眼睛。&#39;</span><span class="p">,</span>
        <span class="p">];</span>
        <span class="k">return</span> <span class="nv">$arr</span><span class="p">[</span><span class="nv">$id</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>以及修改 controller.php 檔案內容</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">App\Http\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Illuminate\Http\Request</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">App\Services\TriviaService</span><span class="p">;</span> 

<span class="k">class</span> <span class="nc">TriviaController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">trivia</span><span class="p">(</span><span class="nv">$id</span><span class="p">){</span>
         <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nx">TriviaService</span><span class="p">())</span><span class="o">-&gt;</span><span class="na">trivia</span><span class="p">(</span><span class="nv">$id</span><span class="p">);</span> 
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>記得要 <code>use App\Services\TriviaService; </code> ，下面才可以 Call TriviaService() 。</p>
<p>這時候我們再去測試一下，就可以發現，網頁會依照我們所輸入的 <code>id</code>，而顯示不同的冷知識。 <font color='red'>這時候如果輸入非數字或是超過陣列的值，就會出現錯誤！</font></p>
<br>
<figure><a class="lightgallery" href="/images/laravel/trivia.jpg" title="/images/laravel/trivia.jpg" data-thumbnail="/images/laravel/trivia.jpg" data-sub-html="<h2>依照輸入不同的 id 顯示的冷知識</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/laravel/trivia.jpg"
            data-srcset="/images/laravel/trivia.jpg, /images/laravel/trivia.jpg 1.5x, /images/laravel/trivia.jpg 2x"
            data-sizes="auto"
            alt="/images/laravel/trivia.jpg" width="700" />
    </a><figcaption class="image-caption">依照輸入不同的 <code>id</code> 顯示的冷知識</figcaption>
    </figure>
<br>
<h4 id="database-資料庫">Database 資料庫</h4>
<p>我們在 <a href="#laravel-%e6%a1%86%e6%9e%b6" rel="">Laravel 框架</a> 部分有提到 Laravel 支援 MySQL、PostgreSQL、SQLite 、SQL Server 資料庫，本次介紹使用 MySQL 來做說明。</p>
<p>首先我們要先確認資料庫是否與 PHP 有所連結，我們先打開 <code>.env</code> 這個隱藏檔來看，大約在第8行有一段關於資料庫的敘述</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-env" data-lang="env"><span class="nv">DB_CONNECTION</span><span class="o">=</span>mysql
<span class="nv">DB_HOST</span><span class="o">=</span>127.0.0.1
<span class="nv">DB_PORT</span><span class="o">=</span><span class="m">3306</span>
<span class="nv">DB_DATABASE</span><span class="o">=</span>homestead
<span class="nv">DB_USERNAME</span><span class="o">=</span>homestead
<span class="nv">DB_PASSWORD</span><span class="o">=</span>secret
</code></pre></td></tr></table>
</div>
</div><br>
<p>由於我們本次是以 Mysql 來做說明，所以 DB_CONNECTION 不需要改，DB_HOST 以及 DB_PORT 輸入你要連線的資料庫主機以及 Port 號，DB_DATABASE 輸入想要連線的資料庫名稱，以及你的 DB_USERNAME、DB_PASSWORD 帳號及密碼，都完成後，我們來看一下 database 資料夾下有哪些東西吧</p>
<ul>
<li>factories：</li>
<li>migrations：</li>
<li>seeds：</li>
</ul>
<br>
<div class="details admonition tap open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-pencil-alt fa-fw"></i>小提醒<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">在學習時，有看到大神文章底下有人留言說 DB_USERNAME、DB_PASSWORD 不可以有 <code>#</code> ，會導致無法運作。(目前沒有測試過，大家可以再多加留意)</div>
        </div>
    </div>
<br>
<h5 id="migration-資料庫遷移">Migration 資料庫遷移</h5>
<p>在過去開發時，會有一個很頭痛的一件事情，就是要怎麼樣同步各地方的資料庫格式。如果有一個新進工程師要開始開發，只能請別的工程師匯出自己在開發中的資料庫，十分的麻煩，而且如果要修改格式，還需要告知每一個在開發的工程師。</p>
<p>為了解決這個問題，Laravel 框架提供了一個新的功能：資料庫遷移(Migration)。他是利用程式碼來修改資料庫格式，所以資料庫格式和其他的程式碼都使用版本控制內。這麼一來，每次有新的工程師要建構開發環境時，只需要提醒他在取得程式碼的時後，記得跑一下 migration 就可以囉～</p>
<br>
<p>我們來實作看看吧！我們要下 <code>php artisan migrate</code> 指令來把這次的 migration 讀入資料庫並建立架構，詳細的指令介紹，放在 <a href="#migration" rel="">Artisan 相關指令 &gt; Migration</a>。</p>
<br>
<p>執行後發現 &hellip;. 竟然有錯誤</p>
<br>
<figure><a class="lightgallery" href="/images/laravel/mysql_1.png" title="/images/laravel/mysql_1.png" data-thumbnail="/images/laravel/mysql_1.png" data-sub-html="<h2>MySQL 8.x 版本導致錯誤</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/laravel/mysql_1.png"
            data-srcset="/images/laravel/mysql_1.png, /images/laravel/mysql_1.png 1.5x, /images/laravel/mysql_1.png 2x"
            data-sizes="auto"
            alt="/images/laravel/mysql_1.png" width="800" />
    </a><figcaption class="image-caption">MySQL 8.x 版本導致錯誤</figcaption>
    </figure>
<br>
<p>在網路上找了一下資料，好像是Mysql 8.x 版本才會出現的問題，發現需要在我們的 <code>config\database.php</code> mysql 裡面多加一個標籤 modes ，就可以正常運作了！</p>
<div class="details admonition quote open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-quote-right fa-fw"></i>Laravel Mysql 8.x 錯誤文章<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><a href="https://stackoverflow.com/questions/49949526/laravel-mysql-migrate-error" target="_blank" rel="noopener noreffer">Laravel mysql migrate error</a></div>
        </div>
    </div>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php">        <span class="s1">&#39;mysql&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
            <span class="s1">&#39;driver&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mysql&#39;</span><span class="p">,</span>
            <span class="s1">&#39;host&#39;</span> <span class="o">=&gt;</span> <span class="nx">env</span><span class="p">(</span><span class="s1">&#39;DB_HOST&#39;</span><span class="p">,</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">),</span>
            <span class="s1">&#39;port&#39;</span> <span class="o">=&gt;</span> <span class="nx">env</span><span class="p">(</span><span class="s1">&#39;DB_PORT&#39;</span><span class="p">,</span> <span class="s1">&#39;3306&#39;</span><span class="p">),</span>
            <span class="s1">&#39;database&#39;</span> <span class="o">=&gt;</span> <span class="nx">env</span><span class="p">(</span><span class="s1">&#39;DB_DATABASE&#39;</span><span class="p">,</span> <span class="s1">&#39;forge&#39;</span><span class="p">),</span>
            <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="nx">env</span><span class="p">(</span><span class="s1">&#39;DB_USERNAME&#39;</span><span class="p">,</span> <span class="s1">&#39;forge&#39;</span><span class="p">),</span>
            <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="nx">env</span><span class="p">(</span><span class="s1">&#39;DB_PASSWORD&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
            <span class="s1">&#39;unix_socket&#39;</span> <span class="o">=&gt;</span> <span class="nx">env</span><span class="p">(</span><span class="s1">&#39;DB_SOCKET&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">),</span>
            <span class="s1">&#39;charset&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;utf8mb4&#39;</span><span class="p">,</span>
            <span class="s1">&#39;collation&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;utf8mb4_unicode_ci&#39;</span><span class="p">,</span>
            <span class="s1">&#39;prefix&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;strict&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
            <span class="s1">&#39;engine&#39;</span> <span class="o">=&gt;</span> <span class="k">null</span><span class="p">,</span>
            <span class="s1">&#39;modes&#39;</span>  <span class="o">=&gt;</span> <span class="p">[</span>
                <span class="s1">&#39;ONLY_FULL_GROUP_BY&#39;</span><span class="p">,</span>
                <span class="s1">&#39;STRICT_TRANS_TABLES&#39;</span><span class="p">,</span>
                <span class="s1">&#39;NO_ZERO_IN_DATE&#39;</span><span class="p">,</span>
                <span class="s1">&#39;NO_ZERO_DATE&#39;</span><span class="p">,</span>
                <span class="s1">&#39;ERROR_FOR_DIVISION_BY_ZERO&#39;</span><span class="p">,</span>
                <span class="s1">&#39;NO_ENGINE_SUBSTITUTION&#39;</span><span class="p">,</span>
            <span class="p">],</span>
        <span class="p">],</span>
</code></pre></td></tr></table>
</div>
</div><br>
<figure><a class="lightgallery" href="/images/laravel/mysql_2.png" title="/images/laravel/mysql_2.png" data-thumbnail="/images/laravel/mysql_2.png" data-sub-html="<h2>加入 modes 修復成功</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/laravel/mysql_2.png"
            data-srcset="/images/laravel/mysql_2.png, /images/laravel/mysql_2.png 1.5x, /images/laravel/mysql_2.png 2x"
            data-sizes="auto"
            alt="/images/laravel/mysql_2.png" width="800" />
    </a><figcaption class="image-caption">加入 modes 修復成功</figcaption>
    </figure>
如果看到上面這樣，就代表我們遷移運作成功囉～接下來我們去看一下我們資料庫裡面的資料</p>
<br>
<figure><a class="lightgallery" href="/images/laravel/migration.png" title="/images/laravel/migration.png" data-thumbnail="/images/laravel/migration.png" data-sub-html="<h2>使用 migration 後的資料庫</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/laravel/migration.png"
            data-srcset="/images/laravel/migration.png, /images/laravel/migration.png 1.5x, /images/laravel/migration.png 2x"
            data-sizes="auto"
            alt="/images/laravel/migration.png" width="800" />
    </a><figcaption class="image-caption">使用 migration 後的資料庫</figcaption>
    </figure>
可以看到有三張表，一張是儲存 migration 的內容，另外兩張是 Laravel 預設的資料表。</p>
<br>
<h5 id="建立屬於自己的-migration">建立屬於自己的 migration</h5>
<div class="details admonition example open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-list-ol fa-fw"></i>後續實作題目<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">我們會建立一個留言板的資料表，並且透過 RESTful API 的方式去查詢、新增、修改、刪除。</div>
        </div>
    </div>
<p>安裝好之後，我們來建立屬於我們的 migration ，來改變現有的資料庫格式。老樣子，一樣使用 <code>artisan</code> 來產生一個 migration <code>create_message_board_table </code> 。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ php artisan make:migration create_message_board_table
Created Migration: 2022_03_04_084820_create_message_board_table
</code></pre></td></tr></table>
</div>
</div><br>
<p>這樣子就建立好了，那我們來看一下這個檔案裡面寫了什麼吧</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Schema</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CreateMessageBoardTable</span> <span class="k">extends</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * Run the migrations.
</span><span class="sd">     *
</span><span class="sd">     * @return void
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//
</span><span class="c1"></span>    <span class="p">}</span>

    <span class="sd">/**
</span><span class="sd">     * Reverse the migrations.
</span><span class="sd">     *
</span><span class="sd">     * @return void
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>可以看到裡面有一個 up 跟 down 的函式，這兩個代表什麼意思呢？</p>
<p>我們執行 <code>migrate</code> 的時候，會呼叫到 <code>up()</code> 函式的內容，如果使用到 <code>migrate:rollback</code>  回溯時，就會呼叫 <code>down()</code> 函式的內容來還原 <code>migrate</code>  所做的事情。</p>
<p>所以每一個 migration 裡面的 <code>down()</code> 都必須要能復原 <code>up()</code> 所做的事情</p>
<p>因為我們還沒有新增 <code>migrate</code> ，所以回溯機制等等再說明。<code>migrate</code> 可以把他理解新增資料表，那當我們修要修改資料表，就可以使用 <code>migrate:rollback</code>  來回溯歐！</p>
<ul>
<li>migrate：可以把他理解成將程式語言轉成 SQL 的功能</li>
</ul>
<br>
<p>我先來實際操作看看，我們先在剛剛的 <code>create_message_table</code> ，裡面改成下方</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">use</span> <span class="nx">Illuminate\Support\Facades\Schema</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Schema\Blueprint</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Database\Migrations\Migration</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">CreateMessageBoardTable</span> <span class="k">extends</span> <span class="nx">Migration</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">create</span><span class="p">(</span><span class="s1">&#39;message_board&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nx">Blueprint</span> <span class="nv">$table</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">bigIncrements</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">);</span> <span class="c1">//留言板編號
</span><span class="c1"></span>            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span> <span class="c1">//留言板姓名
</span><span class="c1"></span>            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">string</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">);</span> <span class="c1">//留言板內容
</span><span class="c1"></span>            <span class="nv">$table</span><span class="o">-&gt;</span><span class="na">timestamps</span><span class="p">();</span> <span class="c1">//留言板建立以及編輯的時間
</span><span class="c1"></span>        <span class="p">});</span>
    <span class="p">}</span>
    
    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nx">Schema</span><span class="o">::</span><span class="na">dropIfExists</span><span class="p">(</span><span class="s1">&#39;message_board&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p><code>up()</code> 裡面的是透過 <a href="#schema-%e7%b5%90%e6%a7%8b%e7%94%9f%e6%88%90%e5%99%a8" rel="">Schema 結構生成器</a>，產生資料表。(Schema 後續有比較詳細的說明)</p>
<p><code>down()</code> 是指如果進行 <code>migrate:rollback</code> 回溯時會刪除 message_borad 這個資料表 。</p>
<br>
<p>我們下 <code>migrate</code> 指令來將 <code>create_message_board_table.php</code> 轉成資料表，並下指令來檢查一下，是否與我們設定的 Schema 相同。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ php artisan migrate
Migrating: 2022_03_04_084820_create_message_board_table
Migrated:  2022_03_04_084820_create_message_board_table
</code></pre></td></tr></table>
</div>
</div><br>
<figure><a class="lightgallery" href="/images/laravel/mysql_fields.png" title="/images/laravel/mysql_fields.png" data-thumbnail="/images/laravel/mysql_fields.png" data-sub-html="<h2>message_board 欄位</h2>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/images/laravel/mysql_fields.png"
            data-srcset="/images/laravel/mysql_fields.png, /images/laravel/mysql_fields.png 1.5x, /images/laravel/mysql_fields.png 2x"
            data-sizes="auto"
            alt="/images/laravel/mysql_fields.png" width="800" />
    </a><figcaption class="image-caption">message_board 欄位</figcaption>
    </figure>
<br>
<p>很神奇吧，透過程式就可以直接生成資料表的欄位，這也就是為什麼會說 <code>migration</code> 可以透過版本控制來讓新工程師建構環境的原因呦，除了生成以外，也可以透過 <code>migrate:rollback</code> 回溯來刪除資料表，那接著我們來看看要怎麼去修改資料表吧！</p>
<br>
<h5 id="schema-結構生成器">Schema 結構生成器</h5>
<br>
<h2 id="測試">測試</h2>
<p>寫完程式後，除了自己一個一個去測試，也可以寫成程式來測試是否有錯誤。會在此談到測試，是因為自動測試變得簡單也是 Laravel 這個框架的一個重要特性。</p>
<p>那我先來說明一下什麼是自動測試</p>
<ul>
<li>簡單來說，常見的測試，就是我們在完成新功能後，會一個一個實際去測試我們寫的功能，是不是跟我們預想的那樣子運行。</li>
<li>一開始網站還小，功能不多時，還可以應付。但當網站越來越龐大，功能越來越多後，或是要使用不同權限帳號來檢查所有功能，會很辛苦的。</li>
</ul>
<p>幸好，我們可以用自動測試的程式來解決這些瑣事！</p>
<ul>
<li>如果我們每次為每個功能撰寫程式時，都寫另一段小程式來測試這個功能。</li>
<li>隨著時間過去，需求的改變，雖然功能越來越多，但是相對應的，測試這些功能的程式也會越來越多，並且不管這個功能是多久之前開發的，每個功能都有相對應的測試。</li>
</ul>
<h3 id="如何運行自動測試">如何運行自動測試</h3>
<p>在 PHP 的世界，自動測試通常使用 <a href="https://phpunit.de/" target="_blank" rel="noopener noreffer">PHPUnit</a> 這個工具。然後 Laravel 在安裝時，也自動幫我們安裝這個工具了～
Laravel 幫我們把 PHPUnit 安裝在 <code>vendor/</code> 裡面，我們來看看要怎麼使用它吧！使用的指令如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ vendor/phpunit/phpunit/phpunit
PHPUnit 5.7.27 by Sebastian Bergmann and contributors.

..                                                                  <span class="m">2</span> / <span class="m">2</span> <span class="o">(</span>100%<span class="o">)</span>

Time: <span class="m">146</span> ms, Memory: 10.00MB

OK <span class="o">(</span><span class="m">2</span> tests, <span class="m">2</span> assertions<span class="o">)</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>奇怪，我們什麼都還沒做，為什麼會有兩個程式已經通過測試了，是因為 Laravel 預設兩個檔案來當測試的案例，分別位於 <code>tests/Feature/ExampleTest.php</code> 以及 <code>tests/Unit/ExampleTest.php</code>  (單元測試)，我這邊就簡單說明 <code>Feature/ExampleTest.php</code> 這個測試程式做哪些事情</p>
<br>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">Tests\Feature</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Tests\TestCase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Testing\WithoutMiddleware</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Testing\DatabaseMigrations</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Testing\DatabaseTransactions</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ExampleTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * A basic test example.
</span><span class="sd">     *
</span><span class="sd">     * @return void
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testBasicTest</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">);</span>

        <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">assertStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>這個  <code>Feature/ExampleTest.php</code>  的 <code>testBasicTest()</code> 會檢查如果連線到 <code>/</code> ，HTTP Status 有沒有回傳 200 (成功連線)，這個測試功能就是在檢查首頁是否存在 ～</p>
<h3 id="實作測試程式">實作測試程式</h3>
<p>大概了解原理後，一樣我們來實作看看，那我們先來輸入指令，產生一個測試程式</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ php artisan make:test HelloWorldTest
Test created successfully.
</code></pre></td></tr></table>
</div>
</div><br>
<p>Laravel 會自動幫我們在 <code>tests/Feature</code> 底下新增了 HelloWorldTest.php 檔案，內容如下(框架版本5.4)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span>

<span class="k">namespace</span> <span class="nx">Tests\Feature</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Tests\TestCase</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Testing\WithoutMiddleware</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Testing\DatabaseMigrations</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Illuminate\Foundation\Testing\DatabaseTransactions</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">HelloWorldTest</span> <span class="k">extends</span> <span class="nx">TestCase</span>
<span class="p">{</span>
    <span class="sd">/**
</span><span class="sd">     * A basic test example.
</span><span class="sd">     *
</span><span class="sd">     * @return void
</span><span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">testExample</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">assertTrue</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>我們測試的項目是想要連線到 <code>hello-world/</code> 目錄，HTTP Status 會回傳 200 ，以及網站內要看到『 hello world ~ 』的文字，我們將他預設的 testExample() 的內容改成</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-php" data-lang="php">    <span class="k">public</span> <span class="k">function</span> <span class="nf">testExample</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$response</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/hello-world&#39;</span><span class="p">);</span>

        <span class="c1">// 如果連線 hello-world/，HTTP Status 應該要顯示 200
</span><span class="c1"></span>        <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">assertStatus</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
        
        <span class="c1">//連線到網頁內，應該要可以看到「『 hello world ~』文字
</span><span class="c1"></span>        <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">assertSee</span><span class="p">(</span><span class="s1">&#39;hello world ~&#39;</span><span class="p">);</span>
    <span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><br>
<p>來運作一下吧，一樣使用同樣的指令來做測試，順便讓大家看一下測試錯誤的錯誤訊息吧！</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">$ vendor/phpunit/phpunit/phpunit
PHPUnit 5.7.27 by Sebastian Bergmann and contributors.

.F.                                                                 <span class="m">3</span> / <span class="m">3</span> <span class="o">(</span>100%<span class="o">)</span>

Time: <span class="m">200</span> ms, Memory: 10.00MB

There was <span class="m">1</span> failure:

1<span class="o">)</span> Tests<span class="se">\F</span>eature<span class="se">\H</span>elloWorldTest::testExample
Expected status code <span class="m">200</span> but received 404.
Failed asserting that <span class="nb">false</span> is true.

FAILURES!
Tests: 3, Assertions: 3, Failures: 1.
</code></pre></td></tr></table>
</div>
</div><br>
<p>我故意在 routes 下沒有放 <code>hello-world/</code> 路徑，所以返回顯示 404 ，而不是 200 ，因此，就可以知道要怎麼去修改程式囉  !</p>
<br>
<h2 id="artisan-相關指令">Artisan 相關指令</h2>
<h3 id="controller">Controller</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">php artisan make:controller <span class="o">{</span>名稱<span class="o">}</span>Controller //建立一個 Controller
</code></pre></td></tr></table>
</div>
</div><br>
<h3 id="migration">Migration</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh">php artisan make:seeder  //產生seeder檔案
php artisan make:factory //產生factory 檔案
php artisan make:migration //產生migration 檔案
php artisan migrate //將這次的migration讀入資料庫建立架構
php artisan migrate:rollback //推回上一次的migration
php artisan migrate:reset //推回全數的migration
php artisan migrate:refresh //推回所有遷移並且再執行一次
php artisan migrate --seed //將這次的migration讀入資料庫建立架構並且也跑seeder
php artisan migrate:refresh --seed //推回所有遷移並且再執行一次以及seeder
php artisan db:seed //單純跑資料的seeder 填充資料
</code></pre></td></tr></table>
</div>
</div><h2 id="參考資料">參考資料</h2>
<p><a href="https://ithelp.ithome.com.tw/articles/10237537" target="_blank" rel="noopener noreffer">PHP與Laravel簡介</a></p>
<p><a href="https://opensourcedoc.com/blog/comparing-php-web-frameworks/" target="_blank" rel="noopener noreffer">比較 PHP 網頁框架
</a></p>
<p><a href="https://christmasq.wordpress.com/2018/12/04/php-laravel-%E5%BE%9E%E5%85%A5%E9%96%80%E5%88%B0%E6%94%BE%E6%A3%84-%E4%B8%80-%E9%80%8F%E9%81%8E-composer-%E6%9E%B6%E8%A8%AD-laravel-%E7%B6%B2%E7%AB%99/" target="_blank" rel="noopener noreffer">Laravel 從入門到放棄 (一) – 透過 composer 架設 laravel 網站</a></p>
<p><a href="https://angela52799.medium.com/php-laravel-%E5%AE%89%E8%A3%9D%E6%95%99%E5%AD%B8-16fc4c2271ee" target="_blank" rel="noopener noreffer">PHP Laravel 安裝教學</a></p>
<p><a href="https://ithelp.ithome.com.tw/articles/10207752" target="_blank" rel="noopener noreffer">資料庫設計概念 - ORM</a></p>
<p><a href="https://ithelp.ithome.com.tw/articles/10213294" target="_blank" rel="noopener noreffer">Laravel 6.0 初體驗！怎麼用最新的 laravel 架網站！</a></p>
<p><a href="https://ithelp.ithome.com.tw/articles/10217731" target="_blank" rel="noopener noreffer">Laravel Route(路由)</a></p></div><div class="post-footer" id="post-footer">
    <div class="post-info"><div class="post-info-tag"><span><a href="/tags/php/">PHP</a>
                </span><span><a href="/tags/%E6%A1%86%E6%9E%B6/">框架</a>
                </span><span><a href="/tags/laravel/">Laravel</a>
                </span><span><a href="/tags/%E5%AF%A6%E4%BD%9C/">實作</a>
                </span><span><a href="/tags/%E4%BB%8B%E7%B4%B9/">介紹</a>
                </span></div><div class="post-info-line"><div class="post-info-mod">
                <span>更新於 2022-03-04&nbsp;<a class="git-hash" href="https://github.com/880831ian/blog/commit/925e97c3292424a939467022196fa795f429cedd" target="_blank" title="committed&nbsp;by&nbsp;ian_zhuang(880831ian@gmail.com)&nbsp;925e97c:&nbsp;# 新增 Laravel">
                            <i class="fas fa-hashtag fa-fw"></i>925e97c</a></span>
            </div><div class="post-info-mod"><span>
                            <a class="link-to-markdown" href="/laravel/index.md" target="_blank">閱讀原始文檔</a>
                        </span><span>
                        &nbsp;|&nbsp;
                        <a class="link-to-markdown" href="https://github.com/880831ian/blog/tree/main/content/posts/laravel/index.zh-tw.md" target="_blank">Improve Article</a>
                    </span></div>
        </div><div class="post-info-share">
            <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://pin-yi.me/laravel/" data-title="Laravel 介紹 (使用 Laravel 從零到有開發出一個留言板功能並搭配 RESTful API 來CRUD) " data-hashtags="PHP,框架,Laravel,實作,介紹"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://pin-yi.me/laravel/" data-hashtag="PHP"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Linkedin" data-sharer="linkedin" data-url="https://pin-yi.me/laravel/"><i class="fab fa-linkedin fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Reddit" data-sharer="reddit" data-url="https://pin-yi.me/laravel/"><i class="fab fa-reddit fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://pin-yi.me/laravel/" data-title="Laravel 介紹 (使用 Laravel 從零到有開發出一個留言板功能並搭配 RESTful API 來CRUD) "><i class="fab fa-line fa-fw"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://pin-yi.me/laravel/" data-title="Laravel 介紹 (使用 Laravel 從零到有開發出一個留言板功能並搭配 RESTful API 來CRUD) "><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Skype" data-sharer="skype" data-url="https://pin-yi.me/laravel/" data-title="Laravel 介紹 (使用 Laravel 從零到有開發出一個留言板功能並搭配 RESTful API 來CRUD) "><i class="fab fa-skype fa-fw"></i></a></span>
        </div></div><div class="post-nav"><a href="/php-restful-api/" class="prev" rel="prev" title="如何在 Nginx 下實作第一個 PHP 留言板 RESTful API"><i class="fas fa-angle-left fa-fw"></i>Previous Post</a>
            <a href="/char-varchar/" class="next" rel="next" title="面試官常問的 MySQL 資料型態差別 char varchar text">Next Post<i class="fas fa-angle-right fa-fw"></i></a></div></div>
</div><div id="comments" class="single-card"><div id="disqus_thread"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript><div id="commento"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://commento.io/">Commento</a>.
            </noscript></div></article></div>
            </main>
            <footer class="footer"><div class="footer-container"><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/">PinYi</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
</div>
<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker
        .register('/sw.min.js?version=1.0.1', { scope: '/' })
        .then(() => {
            console.info('PinYi\u00A0Service Worker Registered');
        }, err => console.error('PinYi\u00A0Service Worker registration failed: ', err));

    navigator.serviceWorker
        .ready
        .then(() => {
            console.info('PinYi\u00A0Service Worker Ready');
        });
}
</script>
</footer>
        </div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到頂部">
                <i class="fas fa-chevron-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看評論">
                <i class="fas fa-comment-alt fa-fw"></i>
            </a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.1-beta.0/dist/css/lightgallery.min.css"><script src="https://.disqus.com/embed.js" defer></script><script src="https://cdn.commento.io/js/commento.js" defer></script><script src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.0/dist/autocomplete.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script src="/lib/lunr/lunr.stemmer.support.min.js"></script><script src="/lib/lunr/lunr.zh.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.4.1-beta.0/dist/js/lightgallery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.3.0/dist/lg-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script><script src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.1/sharer.min.js"></script><script>window.config={"code":{"copyTitle":"複製到剪貼板","maxShownLines":30},"comment":{},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"找不到你輸入的資料🥲","snippetLength":50,"type":"lunr"}};</script><script src="/js/theme.min.js"></script></body></html>
